{"version":3,"sources":["../../js/util/mouseOverlay.js"],"names":["define","defineComponent","MouseOverlay","after","overlayNode","$","css","hide","appendTo","document","body","transformProperty","cssProps","transform","textNode","find","textNodeMessage","textNodeSubtitle","$win","window","position","width","height","on","onDisplayInformation","onHideInformation","onMouseMove","onClick","clearTimeout","timeout","tracking","event","data","self","_","isArray","length","subtitle","text","message","empty","show","delay","dismissDuration","requestAnimationFrame","align","mouseMoved","style","pageX","pageY"],"mappings":"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","file":"mouseOverlay.js","sourcesContent":["\ndefine([\n    'flight/lib/component'\n],\nfunction(defineComponent) {\n    'use strict';\n\n    return defineComponent(MouseOverlay);\n\n    function MouseOverlay() {\n\n        this.after('initialize', function() {\n            this.overlayNode = $(`\n                <div class=\"tooltip fade right in\">\n                    <div class=\"tooltip-arrow\"></div>\n                    <div class=\"tooltip-inner\">\n                        <div class=\"message\"></div>\n                        <div class=\"subtitle\"></div>\n                    </div>\n                </div>`)\n                .css('transform', '')\n                .hide()\n                .appendTo(document.body);\n\n            this.transformProperty = $.cssProps.transform;\n            this.textNode = this.overlayNode.find('.tooltip-inner');\n            this.textNodeMessage = this.overlayNode.find('.message');\n            this.textNodeSubtitle = this.overlayNode.find('.subtitle');\n\n            var $win = $(window);\n            this.position = [$win.width() / 2, $win.height() / 2];\n\n            this.on('displayInformation', this.onDisplayInformation);\n            this.on('hideInformation', this.onHideInformation);\n            this.on('mousemove.displayInformation', this.onMouseMove);\n            this.on(document, 'click', this.onClick);\n        });\n\n        this.hide = function() {\n            clearTimeout(this.timeout);\n            this.overlayNode.hide();\n            this.tracking = false;\n        };\n\n        this.onClick = function() {\n            this.hide();\n        };\n\n        this.onHideInformation = function(event, data) {\n            this.hide();\n        };\n\n        /**\n         * @options data.dismiss [click, auto]\n         * @options data.dismissDuration default 2000\n         */\n        this.onDisplayInformation = function(event, data) {\n            var self = this;\n\n            if (data && 'position' in data && _.isArray(data.position) && data.position.length === 2) {\n                this.position = data.position;\n            }\n\n            clearTimeout(this.timeout);\n            if (!this.position) return;\n\n            this.tracking = true;\n            this.textNode.css('text-align', data.subtitle ? 'left' : 'center');\n            this.textNodeMessage\n                .css('font-weight', data.subtitle ? 'bold' : 'normal')\n                .text(data.message);\n            if (data.subtitle) {\n                this.textNodeSubtitle.text(data.subtitle);\n            } else {\n                this.textNodeSubtitle.empty();\n            }\n            this.overlayNode\n                .css('transform',\n                    'translate(' + this.position[0] + 'px,' + this.position[1] + 'px)'\n                ).show();\n\n            this.timeout = _.delay(function() {\n                self.overlayNode.hide();\n                self.tracking = false;\n            }, data.dismissDuration || 2000);\n\n            requestAnimationFrame(function align() {\n                if (self.tracking) {\n                    if (self.mouseMoved) {\n                        self.overlayNode[0].style[self.transformProperty] =\n                            'translate(' + self.position[0] + 'px,' + self.position[1] + 'px)';\n                        self.mouseMoved = false;\n                    }\n                    requestAnimationFrame(align);\n                }\n            });\n        };\n\n        this.onMouseMove = function(event) {\n            this.mouseMoved = true;\n            this.position = [event.pageX + 10, event.pageY - 10];\n        };\n    }\n});\n"]}