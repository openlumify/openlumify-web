var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};define(['flight/lib/component','util/component/attacher'],function(defineComponent,attacher){var HIDE_PROPERTIES=['http://openlumify.org/comment#entry'];return defineComponent(PropertySelect);function PropertySelect(){this.after('teardown',function(){this.attacher.teardown();});this.after('initialize',function(){var _this=this;if('unsupportedProperties'in this.attr){console.warn('Attribute `unsupportedProperties` no longer used. Use filter attributes to customize list');}if('maxItems'in this.attr){console.warn('maxItems is no longer supported');}this.on('filterProperties',function(event,filter){var params=this.attacher._params;var nextFilter=_.omit(_extends({},params.filter,filter),function(value){return value===null;});this.attacher.params(_extends({},params,{filter:nextFilter})).attach();});this.on('selectProperty',function(event,data){var params=this.attacher._params;this.attacher.params(_extends({},params,{value:data&&data.property||null})).attach();});var _attr=this.attr,_attr$filter=_attr.filter,filter=_attr$filter===undefined?{}:_attr$filter,_attr$rollupCompound=_attr.rollupCompound,rollupCompound=_attr$rollupCompound===undefined?true:_attr$rollupCompound,_attr$hideCompound=_attr.hideCompound,hideCompound=_attr$hideCompound===undefined?false:_attr$hideCompound,focus=_attr.focus,placeholder=_attr.placeholder,properties=_attr.properties,onlySearchable=_attr.onlySearchable,onlySortable=_attr.onlySortable,onlyDataTypes=_attr.onlyDataTypes,domainType=_attr.domainType,showAdminProperties=_attr.showAdminProperties,limitParentConceptId=_attr.limitParentConceptId;if(_.isArray(onlyDataTypes)){filter.dataTypes=onlyDataTypes;}if(domainType){filter.domainType=domainType;}if(onlySearchable===true){filter.searchable=true;}if(showAdminProperties===true){filter.userVisible=null;}if(onlySortable===true){filter.sortable=true;}if(limitParentConceptId){filter.conceptId=limitParentConceptId;}if(properties){filter.properties=_.indexBy(properties,'title');}this.attacher=attacher().node(this.node).params({properties:this.attr.properties,filter:_extends({},filter,{rollupCompound:rollupCompound,hideCompound:hideCompound}),value:this.attr.selectedProperty,autofocus:focus===true,creatable:this.attr.creatable!==false,placeholder:placeholder}).behavior({onSelected:function onSelected(attacher,property){_this.trigger('propertyselected',{property:property});}}).path('components/ontology/PropertySelector');this.attacher.attach();});}});
//# sourceMappingURL=propertySelect.js.map
