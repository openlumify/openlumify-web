{"version":3,"sources":["../../js/util/visibility.js"],"names":["define","defineComponent","Visibility","after","observeHidden","isVisible","document","hiddenProperty","isHidden","hidden","visibilityChange","mozHidden","msHidden","webkitHidden","hiddenEvent","on","onVisibilityChange","event","trigger","visible"],"mappings":"AACAA,OAAO,CACH,sBADG,CAAP,CAEG,SAASC,eAAT,CAA0B,CACzB,aAEA,MAAOA,iBAAgBC,UAAhB,CAAP,CAEA,QAASA,WAAT,EAAsB,CAElB,KAAKC,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,KAAKC,aAAL,GACH,CAFD,EAIA,KAAKC,SAAL,CAAiB,UAAW,CACxB,MAAO,CAACC,SAAS,KAAKC,cAAd,CAAR,CACH,CAFD,CAIA,KAAKC,QAAL,CAAgB,UAAW,CACvB,MAAO,CAAC,KAAKH,SAAL,EAAR,CACH,CAFD,CAIA,KAAKD,aAAL,CAAqB,UAAW,CAC5B,GAAIK,OAAJ,CAAYC,gBAAZ,CACA,GAAI,MAAOJ,UAASG,MAAhB,GAA2B,WAA/B,CAA4C,CACxCA,OAAS,QAAT,CACAC,iBAAmB,kBAAnB,CACH,CAHD,IAGO,IAAI,MAAOJ,UAASK,SAAhB,GAA8B,WAAlC,CAA+C,CAClDF,OAAS,WAAT,CACAC,iBAAmB,qBAAnB,CACH,CAHM,IAGA,IAAI,MAAOJ,UAASM,QAAhB,GAA6B,WAAjC,CAA8C,CACjDH,OAAS,UAAT,CACAC,iBAAmB,oBAAnB,CACH,CAHM,IAGA,IAAI,MAAOJ,UAASO,YAAhB,GAAiC,WAArC,CAAkD,CACrDJ,OAAS,cAAT,CACAC,iBAAmB,wBAAnB,CACH,CAED,KAAKH,cAAL,CAAsBE,MAAtB,CACA,KAAKK,WAAL,CAAmBJ,gBAAnB,CAEA,KAAKK,EAAL,CAAQL,gBAAR,CAA0B,KAAKM,kBAA/B,EACH,CApBD,CAsBA,KAAKA,kBAAL,CAA0B,SAASC,KAAT,CAAgB,CACtC,KAAKC,OAAL,CAAa,0BAAb,CAAyC,CACrCC,QAAS,KAAKd,SAAL,EAD4B,CAErCI,OAAQ,KAAKD,QAAL,EAF6B,CAAzC,EAIH,CALD,CAMH,CACJ,CAlDD","file":"visibility.js","sourcesContent":["\ndefine([\n    'flight/lib/component'\n], function(defineComponent) {\n    'use strict';\n\n    return defineComponent(Visibility);\n\n    function Visibility() {\n\n        this.after('initialize', function() {\n            this.observeHidden();\n        });\n\n        this.isVisible = function() {\n            return !document[this.hiddenProperty];\n        };\n\n        this.isHidden = function() {\n            return !this.isVisible();\n        };\n\n        this.observeHidden = function() {\n            var hidden, visibilityChange;\n            if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support\n                hidden = 'hidden';\n                visibilityChange = 'visibilitychange';\n            } else if (typeof document.mozHidden !== 'undefined') {\n                hidden = 'mozHidden';\n                visibilityChange = 'mozvisibilitychange';\n            } else if (typeof document.msHidden !== 'undefined') {\n                hidden = 'msHidden';\n                visibilityChange = 'msvisibilitychange';\n            } else if (typeof document.webkitHidden !== 'undefined') {\n                hidden = 'webkitHidden';\n                visibilityChange = 'webkitvisibilitychange';\n            }\n\n            this.hiddenProperty = hidden;\n            this.hiddenEvent = visibilityChange;\n\n            this.on(visibilityChange, this.onVisibilityChange);\n        };\n\n        this.onVisibilityChange = function(event) {\n            this.trigger('window-visibility-change', {\n                visible: this.isVisible(),\n                hidden: this.isHidden()\n            });\n        };\n    }\n});\n"]}