{"version":3,"sources":["../../js/util/withTeardown.js"],"names":["define","EVENT_NAME","withTeardown","after","trigger","childComponents","on","onComponentInitialized","event","stopPropagation","target","node","push","before","forEach","c","$","teardownAllComponents"],"mappings":"AACAA,OAAO,EAAP,CAAW,UAAW,CAClB,aAEA,GAAIC,YAAa,sBAAjB,CAEA,MAAOC,aAAP,CAMA,QAASA,aAAT,EAAwB,CAEpB,KAAKC,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,KAAKC,OAAL,CAAaH,UAAb,EAEA,KAAKI,eAAL,CAAuB,EAAvB,CACA,KAAKC,EAAL,CAAQL,UAAR,CAAoB,KAAKM,sBAAzB,EACH,CALD,EAOA,KAAKA,sBAAL,CAA8B,SAASC,KAAT,CAAgB,CAC1CA,MAAMC,eAAN,GAEA,GAAID,MAAME,MAAN,GAAiB,KAAKC,IAA1B,CAAgC,CAC5B,GAAI,KAAKN,eAAT,CAA0B,CACtB,KAAKA,eAAL,CAAqBO,IAArB,CAA0BJ,MAAME,MAAhC,EACH,CACJ,CACJ,CARD,CAUA,KAAKG,MAAL,CAAY,UAAZ,CAAwB,UAAW,CAC/B,GAAI,KAAKR,eAAT,CAA0B,CACtB,KAAKA,eAAL,CAAqBS,OAArB,CAA6B,SAASC,CAAT,CAAY,CACrCC,EAAED,CAAF,EAAKE,qBAAL,GACH,CAFD,EAGH,CACJ,CAND,EAOH,CAEJ,CAvCD","file":"withTeardown.js","sourcesContent":["\ndefine([], function() {\n    'use strict';\n\n    var EVENT_NAME = 'componentInitialized';\n\n    return withTeardown;\n\n    /**\n     * Mixin that broadcasts initialization to parent nodes components\n     * and will teardown all child components\n     */\n    function withTeardown() {\n\n        this.after('initialize', function() {\n            this.trigger(EVENT_NAME);\n\n            this.childComponents = [];\n            this.on(EVENT_NAME, this.onComponentInitialized);\n        });\n\n        this.onComponentInitialized = function(event) {\n            event.stopPropagation();\n\n            if (event.target !== this.node) {\n                if (this.childComponents) {\n                    this.childComponents.push(event.target);\n                }\n            }\n        };\n\n        this.before('teardown', function() {\n            if (this.childComponents) {\n                this.childComponents.forEach(function(c) {\n                    $(c).teardownAllComponents();\n                });\n            }\n        });\n    }\n\n});\n"]}