{"version":3,"sources":["../../../../js/util/popovers/propertyInfo/withPropertyInfo.js"],"names":["define","withDataRequest","_PropertyInfo","withPropertyInfo","after","on","document","teardownAll","showPropertyInfo","button","data","property","$target","$","shouldOpen","lookupAllComponents","length","Promise","all","require","dataRequest","done","results","PropertyInfo","shift","ontologyProperties","ontologyProperty","name","byTitle","attachTo","preferredPosition","teardownComponent","hidePropertyInfo"],"mappings":"AAAAA,OAAO,CACH,sBADG,CAAP,CAEG,SAASC,eAAT,CAA0B,CACzB,aAEA,GAAIC,cAAJ,CAEA,MAAOC,iBAAP,CAEA,QAASA,iBAAT,EAA4B,CAExB,KAAKC,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,KAAKC,EAAL,CAAQC,QAAR,CAAkB,iBAAlB,CAAqC,UAAW,CAC5C,GAAIJ,aAAJ,CAAmBA,cAAcK,WAAd,GACtB,CAFD,EAGH,CAJD,EAMA,KAAKC,gBAAL,CAAwB,SAASC,MAAT,CAAiBC,IAAjB,CAAuBC,QAAvB,CAAiC,CACrD,GAAIC,SAAUC,EAAEJ,MAAF,CAAd,CACIK,WAAaF,QAAQG,mBAAR,GAA8BC,MAA9B,GAAyC,CAD1D,CAGAC,QAAQC,GAAR,CAAY,CACRD,QAAQE,OAAR,CAAgB,yCAAhB,CADQ,CAERlB,gBAAgBmB,WAAhB,CAA4B,UAA5B,CAAwC,YAAxC,CAFQ,CAAZ,EAGGC,IAHH,CAGQ,SAASC,OAAT,CAAkB,CACtB,GAAIC,cAAeD,QAAQE,KAAR,EAAnB,CACIC,mBAAqBH,QAAQE,KAAR,EADzB,CAEIE,iBAAmBD,oBAAsBd,QAAtB,EAAkCA,SAASgB,IAA3C,EAAmDF,mBAAmBG,OAAnB,CAA2BjB,SAASgB,IAApC,CAF1E,CAIAzB,cAAgBqB,YAAhB,CACA,GAAIT,UAAJ,CAAgB,CACZS,aAAahB,WAAb,GACAgB,aAAaM,QAAb,CAAsBjB,OAAtB,CAA+B,CAC3BF,KAAMA,IADqB,CAE3BC,SAAUA,QAFiB,CAG3BmB,kBAAmB,OAHQ,CAI3BJ,iBAAkBA,gBAJS,CAA/B,EAMH,CARD,IAQO,CACHd,QAAQmB,iBAAR,CAA0BR,YAA1B,EACH,CACJ,CApBD,EAqBH,CAzBD,CA2BA,KAAKS,gBAAL,CAAwB,SAASvB,MAAT,CAAiB,CACrC,GAAIG,SAAUC,EAAEJ,MAAF,CAAd,CAEAU,QAAQ,CAAC,yCAAD,CAAR,CAAqD,SAASI,YAAT,CAAuB,CACxEX,QAAQmB,iBAAR,CAA0BR,YAA1B,EACH,CAFD,EAGH,CAND,CAQH,CACJ,CArDD","file":"withPropertyInfo.js","sourcesContent":["define([\n    'util/withDataRequest'\n], function(withDataRequest) {\n    'use strict';\n\n    var _PropertyInfo;\n\n    return withPropertyInfo;\n\n    function withPropertyInfo() {\n\n        this.after('initialize', function() {\n            this.on(document, 'objectsSelected', function() {\n                if (_PropertyInfo) _PropertyInfo.teardownAll();\n            })\n        })\n\n        this.showPropertyInfo = function(button, data, property) {\n            var $target = $(button),\n                shouldOpen = $target.lookupAllComponents().length === 0;\n\n            Promise.all([\n                Promise.require('util/popovers/propertyInfo/propertyInfo'),\n                withDataRequest.dataRequest('ontology', 'properties')\n            ]).done(function(results) {\n                var PropertyInfo = results.shift(),\n                    ontologyProperties = results.shift(),\n                    ontologyProperty = ontologyProperties && property && property.name && ontologyProperties.byTitle[property.name];\n\n                _PropertyInfo = PropertyInfo;\n                if (shouldOpen) {\n                    PropertyInfo.teardownAll();\n                    PropertyInfo.attachTo($target, {\n                        data: data,\n                        property: property,\n                        preferredPosition: 'below',\n                        ontologyProperty: ontologyProperty\n                    });\n                } else {\n                    $target.teardownComponent(PropertyInfo);\n                }\n            });\n        };\n\n        this.hidePropertyInfo = function(button) {\n            var $target = $(button);\n\n            require(['util/popovers/propertyInfo/propertyInfo'], function(PropertyInfo) {\n                $target.teardownComponent(PropertyInfo);\n            });\n        }\n\n    }\n});\n"]}