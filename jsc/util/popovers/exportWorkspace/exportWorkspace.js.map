{"version":3,"sources":["../../../../js/util/popovers/exportWorkspace/exportWorkspace.js"],"names":["define","defineComponent","withPopover","ExportWorkspace","defaultAttrs","cancelButtonSelector","before","popover","find","teardownAllComponents","node","config","template","showTitle","exporter","showPopoverTitle","showCancel","showPopoverCancel","title","i18n","menuItem","hideDialog","after","self","workspaceId","attr","productId","on","onCancel","require","componentPath","C","attrs","cy","_","isFunction","attributes","attachTo","dialog","show","positionDialog","teardown"],"mappings":"AACAA,OAAO,CACH,sBADG,CAEH,gBAFG,CAAP,CAGG,SACCC,eADD,CAECC,WAFD,CAEc,CACb,aAEA,MAAOD,iBAAgBE,eAAhB,CAAiCD,WAAjC,CAAP,CAEA,QAASC,gBAAT,EAA2B,CAEvB,KAAKC,YAAL,CAAkB,CACdC,qBAAsB,oBADR,CAAlB,EAIA,KAAKC,MAAL,CAAY,UAAZ,CAAwB,UAAW,CAC/B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,iBAAlB,EAAqCC,qBAArC,GACH,CAFD,EAIA,KAAKH,MAAL,CAAY,YAAZ,CAA0B,SAASI,IAAT,CAAeC,MAAf,CAAuB,CAC7CA,OAAOC,QAAP,CAAkB,0BAAlB,CACAD,OAAOE,SAAP,CAAmBF,OAAOG,QAAP,CAAgBC,gBAAhB,GAAqC,KAAxD,CACAJ,OAAOK,UAAP,CAAoBL,OAAOG,QAAP,CAAgBG,iBAAhB,GAAsC,KAA1D,CACAN,OAAOO,KAAP,CAAeC,KAAK,iCAAL,CAAwCR,OAAOG,QAAP,CAAgBM,QAAxD,CAAf,CACAT,OAAOU,UAAP,CAAoB,IAApB,CAEA,KAAKC,KAAL,CAAW,mBAAX,CAAgC,UAAW,CACvC,GAAIC,MAAO,IAAX,CACIb,KAAO,KAAKH,OAAL,CAAaC,IAAb,CAAkB,iBAAlB,CADX,CAEIgB,YAAc,KAAKC,IAAL,CAAUD,WAF5B,CAGIE,UAAY,KAAKD,IAAL,CAAUC,SAH1B,CAIIZ,SAAW,KAAKW,IAAL,CAAUX,QAJzB,CAMA,KAAKa,EAAL,CAAQ,KAAKpB,OAAb,CAAsB,OAAtB,CAA+B,CAC3BF,qBAAsB,KAAKuB,QADA,CAA/B,EAIAC,QAAQ,CAACf,SAASgB,aAAV,CAAR,CAAkC,SAASC,CAAT,CAAY,CAC1C,GAAIC,OAAQ,CACRR,uBADQ,CAERE,mBAFQ,CAGRZ,iBAHQ,CAIRmB,GAAIV,KAAKE,IAAL,CAAUQ,EAJN,CAAZ,CAOA,GAAIC,EAAEC,UAAF,CAAarB,SAASsB,UAAtB,CAAJ,CAAuC,CACnCJ,MAAQlB,SAASsB,UAAT,CAAoBJ,KAApB,CAAR,CACH,CAaDD,EAAEM,QAAF,CAAW3B,IAAX,CAAiBsB,KAAjB,EACAT,KAAKe,MAAL,CAAYC,IAAZ,GACAhB,KAAKiB,cAAL,GACH,CA1BD,EA2BH,CAtCD,EAwCA,KAAKZ,QAAL,CAAgB,UAAW,CACvB,KAAKa,QAAL,GACH,CAFD,CAGH,CAlDD,EAmDH,CACJ,CAxED","file":"exportWorkspace.js","sourcesContent":["\ndefine([\n    'flight/lib/component',\n    '../withPopover'\n], function(\n    defineComponent,\n    withPopover) {\n    'use strict';\n\n    return defineComponent(ExportWorkspace, withPopover);\n\n    function ExportWorkspace() {\n\n        this.defaultAttrs({\n            cancelButtonSelector: 'button.btn-default'\n        });\n\n        this.before('teardown', function() {\n            this.popover.find('.plugin-content').teardownAllComponents();\n        });\n\n        this.before('initialize', function(node, config) {\n            config.template = 'exportWorkspace/template';\n            config.showTitle = config.exporter.showPopoverTitle !== false;\n            config.showCancel = config.exporter.showPopoverCancel !== false;\n            config.title = i18n('popovers.export_workspace.title', config.exporter.menuItem);\n            config.hideDialog = true;\n\n            this.after('setupWithTemplate', function() {\n                var self = this,\n                    node = this.popover.find('.plugin-content'),\n                    workspaceId = this.attr.workspaceId,\n                    productId = this.attr.productId,\n                    exporter = this.attr.exporter;\n\n                this.on(this.popover, 'click', {\n                    cancelButtonSelector: this.onCancel\n                });\n\n                require([exporter.componentPath], function(C) {\n                    var attrs = {\n                        workspaceId,\n                        productId,\n                        exporter,\n                        cy: self.attr.cy\n                    };\n\n                    if (_.isFunction(exporter.attributes)) {\n                        attrs = exporter.attributes(attrs);\n                    }\n\n                    /**\n                     * If the exporter extension configuration includes an\n                     * `attributes` function, all those attributes will be\n                     * available as well.\n                     *\n                     * @typedef org.openlumify.graph.export~Exporter\n                     * @property {string} workspaceId\n                     * @property {string} productId\n                     * @property {object} exporter\n                     * @property {object} cy The cytoscape object\n                     */\n                    C.attachTo(node, attrs);\n                    self.dialog.show();\n                    self.positionDialog();\n                });\n            });\n\n            this.onCancel = function() {\n                this.teardown();\n            }\n        });\n    }\n});\n"]}