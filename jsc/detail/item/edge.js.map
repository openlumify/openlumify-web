{"version":3,"sources":["../../../js/detail/item/edge.js"],"names":["define","defineComponent","withItem","Edge","attributes","model","ignoreUpdateModelNotImplemented","after","self","on","document","onEdgesUpdated","onVerticesUpdated","$node","find","each","vertexId","$","hasClass","attr","inVertexId","outVertexId","addClass","event","data","edges","forEach","e","id","trigger","source","_","findWhere","vertices","target","extend"],"mappings":"AAAAA,OAAO,CACH,sBADG,CAEH,YAFG,CAAP,CAGG,SACCC,eADD,CAECC,QAFD,CAEW,CACV,aAEA,MAAOD,iBAAgBE,IAAhB,CAAsBD,QAAtB,CAAP,CAEA,QAASC,KAAT,EAAgB,CAEZ,KAAKC,UAAL,CAAgB,CACZC,MAAO,IADK,CAEZC,gCAAiC,IAFrB,CAAhB,EAKA,KAAKC,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,GAAIC,MAAO,IAAX,CAEA,KAAKC,EAAL,CAAQC,QAAR,CAAkB,cAAlB,CAAkC,KAAKC,cAAvC,EACA,KAAKF,EAAL,CAAQC,QAAR,CAAkB,iBAAlB,CAAqC,KAAKE,iBAA1C,EAEA,KAAKC,KAAL,CAAWC,IAAX,CAAgB,wBAAhB,EAA0CC,IAA1C,CAA+C,UAAW,CACtD,GAAIC,UAAWC,EAAE,IAAF,EAAQC,QAAR,CAAiB,WAAjB,EAAgCV,KAAKW,IAAL,CAAUd,KAAV,CAAgBe,UAAhD,CAA6DZ,KAAKW,IAAL,CAAUd,KAAV,CAAgBgB,WAA5F,CACAJ,EAAE,IAAF,EAAQE,IAAR,CAAa,gBAAb,CAA+BH,QAA/B,EAAyCM,QAAzC,CAAkD,kBAAlD,EACH,CAHD,EAIH,CAVD,EAYA,KAAKX,cAAL,CAAsB,SAASY,KAAT,CAAgBC,IAAhB,CAAsB,CACxC,GAAIhB,MAAO,IAAX,CACAgB,KAAKC,KAAL,CAAWC,OAAX,CAAmB,SAASC,CAAT,CAAY,CAC3B,GAAInB,KAAKW,IAAL,CAAUd,KAAV,CAAgBuB,EAAhB,GAAuBD,EAAEC,EAA7B,CAAiC,CAC7BpB,KAAKqB,OAAL,CAAa,aAAb,CAA4B,CAAExB,MAAOsB,CAAT,CAA5B,EACH,CACJ,CAJD,EAKH,CAPD,CASA,KAAKf,iBAAL,CAAyB,SAASW,KAAT,CAAgBC,IAAhB,CAAsB,CAC3C,GAAIM,QAASC,EAAEC,SAAF,CAAYR,KAAKS,QAAjB,CAA2B,CAAEL,GAAI,KAAKT,IAAL,CAAUd,KAAV,CAAgBgB,WAAtB,CAA3B,CAAb,CACIa,OAASH,EAAEC,SAAF,CAAYR,KAAKS,QAAjB,CAA2B,CAAEL,GAAI,KAAKT,IAAL,CAAUd,KAAV,CAAgBe,UAAtB,CAA3B,CADb,CAGA,GAAIU,QAAUI,MAAd,CAAsB,CAClB,KAAKL,OAAL,CAAa,aAAb,CAA4B,CACxBxB,MAAO0B,EAAEI,MAAF,CAAS,EAAT,CAAa,KAAKhB,IAAL,CAAUd,KAAvB,CAA8B,CACjCyB,OAAQA,MADyB,CAEjCI,OAAQA,MAFyB,CAA9B,CADiB,CAA5B,EAMH,CACJ,CAZD,CAaH,CAEJ,CArDD","file":"edge.js","sourcesContent":["define([\n    'flight/lib/component',\n    './withItem'\n], function(\n    defineComponent,\n    withItem) {\n    'use strict';\n\n    return defineComponent(Edge, withItem);\n\n    function Edge() {\n\n        this.attributes({\n            model: null,\n            ignoreUpdateModelNotImplemented: true\n        })\n\n        this.after('initialize', function() {\n            var self = this;\n\n            this.on(document, 'edgesUpdated', this.onEdgesUpdated);\n            this.on(document, 'verticesUpdated', this.onVerticesUpdated);\n\n            this.$node.find('.vertex-in,.vertex-out').each(function() {\n                var vertexId = $(this).hasClass('vertex-in') ? self.attr.model.inVertexId : self.attr.model.outVertexId;\n                $(this).attr('data-vertex-id', vertexId).addClass('vertex-draggable');\n            });\n        })\n\n        this.onEdgesUpdated = function(event, data) {\n            var self = this;\n            data.edges.forEach(function(e) {\n                if (self.attr.model.id === e.id) {\n                    self.trigger('updateModel', { model: e })\n                }\n            });\n        };\n\n        this.onVerticesUpdated = function(event, data) {\n            var source = _.findWhere(data.vertices, { id: this.attr.model.outVertexId }),\n                target = _.findWhere(data.vertices, { id: this.attr.model.inVertexId });\n\n            if (source || target) {\n                this.trigger('updateModel', {\n                    model: _.extend({}, this.attr.model, {\n                        source: source,\n                        target: target\n                    })\n                })\n            }\n        };\n    }\n\n});\n"]}