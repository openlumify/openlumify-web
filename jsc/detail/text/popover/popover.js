define(['flight/lib/component','util/popovers/withPopover','util/component/attacher','util/range'],function(defineComponent,withPopover,Attacher,rangeUtils){return defineComponent(TextPopover,withPopover);function TextPopover(){this.before('teardown',function(){if(this.attacher){this.attacher.teardown();this.attacher=null;}});this.before('initialize',function(node,config){var _this=this;config.hideDialog=true;config.template='/detail/text/popover/popover.hbs';this.after('setupWithTemplate',function(){var _attr=_this.attr,selection=_attr.selection,terms=_attr.terms,sourceVertexId=_attr.sourceVertexId,targetVertexId=_attr.targetVertexId,artifactId=_attr.artifactId,propertyName=_attr.propertyName,propertyKey=_attr.propertyKey;_this.attacher=Attacher().node(_this.popover.find('.popover-content')).path('detail/text/popover/TermContainer').params({selection:selection,terms:terms,artifactId:artifactId,propertyName:propertyName,propertyKey:propertyKey,sourceVertexId:sourceVertexId,targetVertexId:targetVertexId}).behavior({onHoverTerm:function onHoverTerm(attacher,id){_this.trigger('hoverTerm',{id:id});},comment:function comment(attacher,sourceInfo){_this.trigger('commentOnSelection',sourceInfo);},openFullscreen:function openFullscreen(attacher,elementIds){_this.trigger(document,'openFullscreen',elementIds);},reloadText:function reloadText(){_this.trigger(document,'textUpdated',{vertexId:artifactId});},closeDialog:function closeDialog(){rangeUtils.clearSelection();_this.teardown();}});_this.attacher.attach().then(function(){_this.dialog.show();_this.positionDialog();});});});}});
//# sourceMappingURL=popover.js.map
