{"version":3,"sources":["../../../../js/data/web-worker/util/cancel.js"],"names":["define","requestCache","cancelPreviousByHash","promise","hash","_","isString","Error","isFunction","cancel","then","previous"],"mappings":"AAAAA,OAAO,EAAP,CAAW,UAAW,CAClB,GAAMC,cAAe,EAArB,CAEA,MAAO,SAASC,qBAAT,CAA8BC,OAA9B,CAAuCC,IAAvC,CAA6C,CAChD,GAAI,CAACC,EAAEC,QAAF,CAAWF,IAAX,CAAL,CAAuB,KAAM,IAAIG,MAAJ,CAAU,8BAAV,CAAN,CACvB,GAAI,CAACJ,OAAD,EAAY,CAACE,EAAEG,UAAF,CAAaL,QAAQM,MAArB,CAAb,EAA6C,CAACJ,EAAEG,UAAF,CAAaL,QAAQO,IAArB,CAAlD,CAA8E,CAC1E,KAAM,IAAIH,MAAJ,CAAU,6BAAV,CAAN,CACH,CAED,GAAMI,UAAWV,aAAaG,IAAb,CAAjB,CACA,GAAIO,QAAJ,CAAc,CACVA,SAASF,MAAT,GACH,CAEDR,aAAaG,IAAb,EAAqBD,OAArB,CAEAA,QAAQO,IAAR,CAAa,UAAM,CACf,MAAOT,cAAaG,IAAb,CAAP,CACH,CAFD,EAIA,MAAOD,QAAP,CACH,CAlBD,CAmBH,CAtBD","file":"cancel.js","sourcesContent":["define([], function() {\n    const requestCache = {};\n\n    return function cancelPreviousByHash(promise, hash) {\n        if (!_.isString(hash)) throw new Error('Cancel hash must be a string')\n        if (!promise || !_.isFunction(promise.cancel) || !_.isFunction(promise.then)) {\n            throw new Error('Promise must be cancellable')\n        }\n\n        const previous = requestCache[hash];\n        if (previous) {\n            previous.cancel();\n        }\n\n        requestCache[hash] = promise;\n\n        promise.then(() => {\n            delete requestCache[hash];\n        })\n\n        return promise;\n    }\n})\n"]}