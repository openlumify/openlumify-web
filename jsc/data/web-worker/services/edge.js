define(['../util/ajax','./storeHelper','require'],function(ajax,storeHelper,require){'use strict';var api={create:function create(options){return ajax('POST','/edge/create',options);},'delete':function _delete(edgeId){return ajax('DELETE','/edge',{edgeId:edgeId});},exists:function exists(edgeIds){return ajax(edgeIds.length>1?'POST':'GET','/edge/exists',{edgeIds:edgeIds});},properties:function properties(edgeId){return ajax('GET','/edge/properties',{graphEdgeId:edgeId});},propertyDetails:function propertyDetails(edgeId,propertyName,propertyKey){var visibilitySource=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';return ajax('GET','/edge/property/details',{edgeId:edgeId,propertyName:propertyName,propertyKey:propertyKey,visibilitySource:visibilitySource});},setPropertyVisibility:function setPropertyVisibility(edgeId,property){return ajax('POST','/edge/property/visibility',{graphEdgeId:edgeId,newVisibilitySource:property.visibilitySource,oldVisibilitySource:property.oldVisibilitySource,propertyKey:property.key,propertyName:property.name});},setProperty:function setProperty(edgeId,property,optionalWorkspaceId){var url=storeHelper.edgePropertyUrl(property);return ajax('POST',url,_.tap({edgeId:edgeId,propertyName:property.name,value:property.value,visibilitySource:property.visibilitySource,oldVisibilitySource:property.oldVisibilitySource},function(params){if(property.sourceInfo){params.sourceInfo=JSON.stringify(property.sourceInfo);}else if(property.justificationText){params.justificationText=property.justificationText;}if(!_.isUndefined(property.key)){params.propertyKey=property.key;}if(property.metadata){params.metadata=JSON.stringify(property.metadata);}if(optionalWorkspaceId){params.workspaceId=optionalWorkspaceId;}})).tap(storeHelper.updateElement);},deleteProperty:function deleteProperty(edgeId,property){var url=storeHelper.edgePropertyUrl(property);return ajax('DELETE',url,{edgeId:edgeId,propertyName:property.name,propertyKey:property.key});},details:function details(edgeId){return ajax('GET','/edge/details',{edgeId:edgeId});},history:function history(edgeId,withVisibility){return ajax('GET','/edge/history',{graphEdgeId:edgeId,withVisibility:withVisibility});},propertyHistory:function propertyHistory(edgeId,property,options){return ajax('GET','/edge/property/history',_.extend({},options||{},{graphEdgeId:edgeId,propertyName:property.name,propertyKey:property.key}));},multiple:storeHelper.createStoreAccessorOrDownloader('edge'),store:function store(options){return api.multiple(options);},setVisibility:function setVisibility(edgeId,visibilitySource){return ajax('POST','/edge/visibility',{graphEdgeId:edgeId,visibilitySource:visibilitySource}).tap(storeHelper.updateElement);}};return api;});
//# sourceMappingURL=edge.js.map
