{"version":3,"sources":["../../../../js/data/web-worker/handlers/dataRequest.js"],"names":["define","message","require","data","service","Service","method","Error","apply","undefined","parameters","progress","p","dispatchMain","requestId","originalRequest","_","pick","then","result","success","catch","error","json"],"mappings":"AAAAA,OAAO,EAAP,CAAW,UAAW,CAClB,aAEA,MAAO,UAASC,OAAT,CAAkB,CACrBC,QAAQ,CAAC,4BAA8BD,QAAQE,IAAR,CAAaC,OAA5C,CAAR,CACA,SAASC,OAAT,CAAkB,CACd,GAAI,EAAEJ,QAAQE,IAAR,CAAaG,MAAb,GAAuBD,QAAzB,CAAJ,CAAuC,CACnC,KAAM,IAAIE,MAAJ,CAAU,YAAcN,QAAQE,IAAR,CAAaC,OAA3B,CAAqC,sBAArC,CAA8DH,QAAQE,IAAR,CAAaG,MAArF,CAAN,CACH,CAEDD,QAAQJ,QAAQE,IAAR,CAAaG,MAArB,EAA6BE,KAA7B,CAAmCC,SAAnC,CAA8CR,QAAQE,IAAR,CAAaO,UAAb,EAA2B,EAAzE,EACKC,QADL,CACc,SAASC,CAAT,CAAY,CAClBC,aAAa,qBAAb,CAAoC,CAChCF,SAAUC,CADsB,CAEhCE,UAAWb,QAAQE,IAAR,CAAaW,SAFQ,CAGhCC,gBAAiBC,EAAEC,IAAF,CAAOhB,QAAQE,IAAf,CAAqB,SAArB,CAAgC,QAAhC,CAA0C,YAA1C,CAHe,CAApC,EAKH,CAPL,EAQKe,IARL,CAQU,SAASC,MAAT,CAAiB,CACnBN,aAAa,sBAAb,CAAqC,CACjCO,QAAS,IADwB,CAEjCD,OAAQA,MAFyB,CAGjCL,UAAWb,QAAQE,IAAR,CAAaW,SAHS,CAIjCC,gBAAiBC,EAAEC,IAAF,CAAOhB,QAAQE,IAAf,CAAqB,SAArB,CAAgC,QAAhC,CAA0C,YAA1C,CAJgB,CAArC,EAMH,CAfL,EAgBKkB,KAhBL,CAgBW,SAASC,KAAT,CAAgB,CACnB,GAAIA,OAASA,gBAAiBf,MAA9B,CAAqC,CACjC,GAAI,CAACe,MAAMC,IAAX,CAAiB,CACbD,MAAQA,MAAMrB,OAAd,CACH,CACJ,CACDY,aAAa,sBAAb,CAAqC,CACjCO,QAAS,KADwB,CAEjCE,MAAOA,KAF0B,CAGjCR,UAAWb,QAAQE,IAAR,CAAaW,SAHS,CAIjCC,gBAAiBC,EAAEC,IAAF,CAAOhB,QAAQE,IAAf,CAAqB,SAArB,CAAgC,QAAhC,CAA0C,YAA1C,CAJgB,CAArC,EAMH,CA5BL,EA6BH,CAnCD,EAoCH,CArCD,CAsCH,CAzCD","file":"dataRequest.js","sourcesContent":["define([], function() {\n    'use strict';\n\n    return function(message) {\n        require(['data/web-worker/services/' + message.data.service],\n        function(Service) {\n            if (!(message.data.method in Service)) {\n                throw new Error('Service: ' + message.data.service + ' is missing method: ' + message.data.method);\n            }\n\n            Service[message.data.method].apply(undefined, message.data.parameters || [])\n                .progress(function(p) {\n                    dispatchMain('dataRequestProgress', {\n                        progress: p,\n                        requestId: message.data.requestId,\n                        originalRequest: _.pick(message.data, 'service', 'method', 'parameters')\n                    });\n                })\n                .then(function(result) {\n                    dispatchMain('dataRequestCompleted', {\n                        success: true,\n                        result: result,\n                        requestId: message.data.requestId,\n                        originalRequest: _.pick(message.data, 'service', 'method', 'parameters')\n                    });\n                })\n                .catch(function(error) {\n                    if (error && error instanceof Error) {\n                        if (!error.json) {\n                            error = error.message;\n                        }\n                    }\n                    dispatchMain('dataRequestCompleted', {\n                        success: false,\n                        error: error,\n                        requestId: message.data.requestId,\n                        originalRequest: _.pick(message.data, 'service', 'method', 'parameters')\n                    })\n                })\n        });\n    };\n})\n"]}