define(['reselect','../element/selectors'],function(reselect,elementSelectors){var createSelector=reselect.createSelector;var getWorkspaceId=function getWorkspaceId(state){return state.workspace.currentId;};var getSelection=function getSelection(state){return state.selection.idsByType;};var getFocused=function getFocused(state){return state.element.focusing;};var getProductWorkspaces=function getProductWorkspaces(state){return state.product.workspaces;};var getProductTypes=function getProductTypes(state){return state.product.types||[];};var getInteracting=function getInteracting(state){return state.product.interacting;};var getProductState=createSelector([getWorkspaceId,getProductWorkspaces],function(workspaceId,productWorkspaces){return productWorkspaces[workspaceId];});var getPreviewHashesById=createSelector([getProductState],function(productState){return productState?productState.previewHashes:{};});var getProductsById=createSelector([getProductState],function(productState){return productState?productState.products:{};});var getViewportsByProductId=createSelector([getProductState],function(productState){return productState&&productState.viewports||{};});var getProducts=createSelector([getProductsById],function(productsById){return _.chain(productsById).values().sortBy('id').sortBy('title').sortBy('kind').value();});var getSelectedId=createSelector([getProductState],function(productState){return productState?productState.selected:null;});var getViewport=createSelector([getViewportsByProductId,getSelectedId],function(viewports,productId){return productId?viewports[productId]:null;});var getProduct=createSelector([getProductsById,getSelectedId],function(productsById,productId){return productId?productsById[productId]:null;});var getPreviewHash=createSelector([getPreviewHashesById,getSelectedId],function(previewHashes,productId){return productId?previewHashes[productId]:null;});var getElementIdsInProduct=createSelector([getProduct],function(product){if(product&&product.extendedData){var elementIds={vertices:product.extendedData.vertices,edges:product.extendedData.edges};return _.mapObject(elementIds,function(elements){return _.pick(elements,function(e){return e.unauthorized!==true;});});}else{return{vertices:{},edges:{}};}});var getElementsInProduct=createSelector([getElementIdsInProduct,elementSelectors.getElements],function(elementIds,elements){var vertices=elementIds.vertices,edges=elementIds.edges;return{vertices:_.pick(elements.vertices,Object.keys(vertices)),edges:_.pick(elements.edges,Object.keys(edges))};});var getSelectedElementsInProduct=createSelector([getSelection,getElementIdsInProduct],function(selection,elementIds){var vertices=elementIds.vertices,edges=elementIds.edges;return{vertices:_.indexBy(_.intersection(selection.vertices,Object.keys(vertices))),edges:_.indexBy(_.intersection(selection.edges,Object.keys(edges)))};});var getFocusedElementsInProduct=createSelector([getFocused,getElementIdsInProduct],function(focusing,elementIds){var vertices=elementIds.vertices,edges=elementIds.edges;var focused={vertices:{},edges:{},isFocusing:false};Object.keys(vertices).forEach(function(vertexId){if(vertexId in focusing.vertexIds){focused.vertices[vertexId]=true;focused.isFocusing=true;}});Object.keys(edges).forEach(function(edgeId){if(edgeId in focusing.edgeIds){focused.edges[edgeId]=true;focused.isFocusing=true;}});return focused;});var getStatus=createSelector([getProductState],function(productState){return productState?_.pick(productState,'loading','loaded'):{loading:false,loaded:false};});return{getStatus:getStatus,getSelectedId:getSelectedId,getProduct:getProduct,getViewport:getViewport,getProducts:getProducts,getPreviewHash:getPreviewHash,getProductsById:getProductsById,getPreviewHashesById:getPreviewHashesById,getProductTypes:getProductTypes,getInteracting:getInteracting,getElementIdsInProduct:getElementIdsInProduct,getElementsInProduct:getElementsInProduct,getSelectedElementsInProduct:getSelectedElementsInProduct,getFocusedElementsInProduct:getFocusedElementsInProduct};});
//# sourceMappingURL=selectors.js.map
