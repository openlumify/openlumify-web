{"version":3,"sources":["../../../../../js/data/web-worker/store/selection/reducer.js"],"names":["define","u","selection","state","type","payload","idsByType","vertices","edges","options","addSelection","removeSelection","setSelection","clearSelection","addElements","append","elements","length","_","uniq","concat","reject","includes","v","e","constant"],"mappings":"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","file":"reducer.js","sourcesContent":["define(['updeep'], function(u) {\n    'use strict';\n\n    return function selection(state, { type, payload }) {\n        if (!state) return { idsByType: { vertices: [], edges: [], options: {} } };\n\n        switch (type) {\n            case 'SELECTION_ADD': return addSelection(state, payload);\n            case 'SELECTION_REMOVE': return removeSelection(state, payload);\n            case 'SELECTION_SET': return setSelection(state, payload);\n            case 'SELECTION_CLEAR': return clearSelection(state, payload);\n        }\n\n        return state\n    }\n\n    function addSelection(state, { selection }) {\n        const { vertices = [], edges = [], options = {} } = selection;\n        const addElements = (type, append) => (elements) => {\n            if (append.length) {\n                return _.uniq(elements.concat(append))\n            }\n            return elements;\n        }\n        return u({\n            idsByType: {\n                vertices: addElements('vertices', vertices),\n                edges: addElements('edges', edges),\n                options\n            }\n        }, state);\n    }\n\n    function removeSelection(state, { selection }) {\n        const { vertices = [], edges = [], options = {} } = selection;\n        return u({\n            idsByType: {\n                vertices: u.reject(v => vertices.includes(v)),\n                edges: u.reject(e => edges.includes(e)),\n                options\n            }\n        }, state);\n    }\n\n    function setSelection(state, { selection }) {\n        const { vertices = [], edges = [], options = {} } = selection;\n        return u({\n            idsByType: u.constant({\n                vertices: _.uniq(vertices),\n                edges: _.uniq(edges),\n                options\n            })\n        }, state)\n    }\n\n    function clearSelection(state) {\n        return u({\n            idsByType: u.constant({\n                vertices: [],\n                edges: [],\n                options: {}\n            })\n        }, state)\n    }\n})\n\n\n"]}