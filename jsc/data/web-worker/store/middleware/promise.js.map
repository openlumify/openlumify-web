{"version":3,"sources":["../../../../../js/data/web-worker/store/middleware/promise.js"],"names":["define","storeActions","reduxPromise","dispatch","next","action","isValidAction","isPromise","then","payload","result","error","obj","_","isFunction"],"mappings":"gOAEAA,OAAO,CAAC,YAAD,CAAP,CAAuB,SAASC,YAAT,CAAuB,CAC1C,aAEA,MAAO,SAASC,aAAT,MAAoC,IAAZC,SAAY,MAAZA,QAAY,CACvC,MAAO,UAAUC,IAAV,CAAgB,CACnB,MAAO,UAAUC,MAAV,CAAkB,CACrB,GAAI,CAACJ,aAAaK,aAAb,CAA2BD,MAA3B,CAAL,CAAyC,CACrC,MAAOE,WAAUF,MAAV,EAAoBA,OAAOG,IAAP,CAAYL,QAAZ,CAApB,CAA4CC,KAAKC,MAAL,CAAnD,CACH,CAED,MAAOE,WAAUF,OAAOI,OAAjB,EAA4BJ,OAAOI,OAAP,CAAeD,IAAf,CAAoB,SAASE,MAAT,CAAiB,CACpE,MAAOP,sBAAcE,MAAd,EAAsBI,QAASC,MAA/B,GAAP,CACH,CAFkC,CAEhC,SAAUC,KAAV,CAAiB,CAChB,MAAOR,sBAAcE,MAAd,EAAsBI,QAASE,KAA/B,CAAsCA,MAAO,IAA7C,GAAP,CACH,CAJkC,CAA5B,CAIFP,KAAKC,MAAL,CAJL,CAKH,CAVD,CAWH,CAZD,CAcA,QAASE,UAAT,CAAmBK,GAAnB,CAAwB,CACpB,MAAOA,MAAOC,EAAEC,UAAF,CAAaF,IAAIJ,IAAjB,CAAd,CACH,CACJ,CAlBD,CAmBH,CAtBD","file":"promise.js","sourcesContent":["// Similar to redux-promise but without es6 deps\n// (lodash, flux-standard-action)\ndefine(['../actions'], function(storeActions) {\n    'use strict';\n\n    return function reduxPromise({ dispatch }) {\n        return function (next) {\n            return function (action) {\n                if (!storeActions.isValidAction(action)) {\n                    return isPromise(action) ? action.then(dispatch) : next(action);\n                }\n\n                return isPromise(action.payload) ? action.payload.then(function(result) {\n                    return dispatch({ ...action, payload: result });\n                }, function (error) {\n                    return dispatch({ ...action, payload: error, error: true });\n                }) : next(action);\n            };\n        };\n\n        function isPromise(obj) {\n            return obj && _.isFunction(obj.then);\n        }\n    }\n});\n\n"]}