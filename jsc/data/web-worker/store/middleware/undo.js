var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};define(['configuration/plugins/registry'],function createUndoMiddleware(registry){registry.markUndocumentedExtensionPoint('org.openlumify.store');var undoExtensions=registry.extensionsForPoint('org.openlumify.store').filter(function(e){return e.undoActions;});var undoActionsByType=undoExtensions.map(function(e){return e.undoActions;}).reduce(function(actions,a){return _extends({},actions,a);},{});return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){if(action.type==='UNDO'){var payload=action.payload;var scope=payload&&payload.undoScope||'global';var history=getState().undoActionHistory[scope];if(history){var undos=history.undos;var _ref2=undos[undos.length-1]||{},type=_ref2.type,undo=_ref2.undo;if(undo&&undoActionsByType[type]){dispatch(undoActionsByType[type].undo(undo));}}}if(action.type==='REDO'){var _payload=action.payload;var _scope=_payload&&_payload.undoScope||'global';var _history=getState().undoActionHistory[_scope];if(_history){var redos=_history.redos;var _ref3=redos[redos.length-1]||{},_type=_ref3.type,redo=_ref3.redo;if(redo&&undoActionsByType[_type]){dispatch(undoActionsByType[_type].redo(redo));}}}return next(action);};};};});
//# sourceMappingURL=undo.js.map
