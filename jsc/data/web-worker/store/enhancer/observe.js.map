{"version":3,"sources":["../../../../../js/data/web-worker/store/enhancer/observe.js"],"names":["define","createStore","reducer","preloadedState","enhancer","store","observe","observeStore","selector","handler","previousState","handleChange","onChange","newState","getState","unsubscribe","subscribe"],"mappings":"AAAAA,OAAO,EAAP,CAAW,UAAW,CAClB,aAEA,MAAO,UAACC,WAAD,QAAiB,UAACC,OAAD,CAAUC,cAAV,CAA0BC,QAA1B,CAAuC,CAC3D,GAAMC,OAAQJ,YAAYC,OAAZ,CAAqBC,cAArB,CAAqCC,QAArC,CAAd,CACAC,MAAMC,OAAN,CAAgBC,aAAaF,KAAb,CAAhB,CAEA,MAAOA,MAAP,CACH,CALM,EAAP,CAOA,QAASE,aAAT,CAAsBF,KAAtB,CAA6B,CACzB,MAAO,UAASG,QAAT,CAAmBC,OAAnB,CAA4B,CAC/B,GAAIC,qBAAJ,CAEA,GAAMC,cAAe,QAAfA,aAAe,EAAM,CACvB,GAAMC,UAAWH,SAAWD,QAA5B,CACA,GAAMK,UAAWJ,QAAUD,SAASH,MAAMS,QAAN,EAAT,CAAV,CAAuCT,MAAMS,QAAN,EAAxD,CAEA,GAAID,WAAaH,aAAjB,CAAgC,CAC5BE,SAASC,QAAT,CAAmBH,aAAnB,EACAA,cAAgBG,QAAhB,CACH,CACJ,CARD,CAUA,GAAME,aAAcV,MAAMW,SAAN,CAAgBL,YAAhB,CAApB,CACAA,eACA,MAAOI,YAAP,CACH,CAhBD,CAiBH,CACJ,CA7BD","file":"observe.js","sourcesContent":["define([], function() {\n    'use strict';\n\n    return (createStore) => (reducer, preloadedState, enhancer) => {\n        const store = createStore(reducer, preloadedState, enhancer)\n        store.observe = observeStore(store);\n\n        return store;\n    }\n\n    function observeStore(store) {\n        return function(selector, handler) {\n            let previousState;\n\n            const handleChange = () => {\n                const onChange = handler || selector;\n                const newState = handler ? selector(store.getState()) : store.getState();\n\n                if (newState !== previousState) {\n                    onChange(newState, previousState);\n                    previousState = newState;\n                }\n            }\n\n            const unsubscribe = store.subscribe(handleChange);\n            handleChange();\n            return unsubscribe;\n        }\n    }\n});\n"]}