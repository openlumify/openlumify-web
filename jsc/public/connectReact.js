var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};define(['create-react-class','prop-types'],function(createReactClass,PropTypes){'use strict';var API_VERSIONS=['v1'];var loadApiPromise=loadApiVersions();var defaultMapApiToProps=function defaultMapApiToProps(apiVersions){var defaultVersion=API_VERSIONS[0];return apiVersions[defaultVersion];};var Connect=function Connect(mapApi,Component){return createReactClass({getInitialState:function getInitialState(){return{connected:false,api:null};},componentWillMount:function componentWillMount(){var _this=this;loadApiPromise.then(function(apiVersions){_this.setState({connected:true,api:apiVersions});});},displayName:'Connect('+getDisplayName(Component)+')',render:function render(){var _state=this.state,connected=_state.connected,api=_state.api;return connected?React.createElement(Component,_extends({},this.props,mapApi(api))):null;}});};function connectReact(mapApiToProps){var mapApi=mapApiToProps?mapApiToProps:defaultMapApiToProps;return _.partial(Connect,mapApi);}return connectReact;function loadApiVersions(){return Promise.map(API_VERSIONS,function(version){return Promise.require('public/'+version+'/api').then(function(api){return api.connect().then(function(asyncApi){var baseApi=_.omit(api,'connect');return[version,_.extend(baseApi,asyncApi)];});});}).then(function(apis){return _.object(apis);});}function getDisplayName(Component){return Component.displayName||Component.name||'Component';}});
//# sourceMappingURL=connectReact.js.map
