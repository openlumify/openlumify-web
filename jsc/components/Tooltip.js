function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}define(['react','react-dom','create-react-class','prop-types','popper'],function(React,ReactDOM,createReactClass,PropTypes,Popper){var _eventsForTrigger;var container;var TriggerTypes={Focus:'focus',Manual:'manual'};var eventsForTrigger=(_eventsForTrigger={},_defineProperty(_eventsForTrigger,TriggerTypes.Focus,['focus','blur']),_defineProperty(_eventsForTrigger,TriggerTypes.Manual,[]),_eventsForTrigger);var Tooltip=createReactClass({displayName:'Tooltip',propTypes:{node:PropTypes.instanceOf(HTMLElement),message:PropTypes.string.isRequired,trigger:PropTypes.string.isRequired,active:PropTypes.bool,className:PropTypes.string,subtitle:PropTypes.string,footer:PropTypes.string,placement:PropTypes.string,offset:PropTypes.string,allowOverflow:PropTypes.array},getDefaultProps:function getDefaultProps(){return{trigger:TriggerTypes.Manual,placement:'auto'};},getInitialState:function getInitialState(){return{style:{visibility:'hidden'}};},componentWillMount:function componentWillMount(){this.el=document.createElement('div');$(document).on('graphPaddingUpdated',this.onGraphPaddingUpdated);},componentDidMount:function componentDidMount(){getContainer().appendChild(this.el);if(this.props.active){this.toggle(true);}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){var _this=this;var _props=this.props,prevNode=_props.node,prevTrigger=_props.trigger;var node=nextProps.node,trigger=nextProps.trigger;if(node!==prevNode||prevTrigger!==trigger){if(prevTrigger&&prevNode){eventsForTrigger[prevTrigger].forEach(function(event){prevNode.removeEventListener(event,_this.onHandleEvent,false);});}if(trigger&&node){eventsForTrigger[trigger].forEach(function(event){node.addEventListener(event,_this.onHandleEvent,false);});}}},componentDidUpdate:function componentDidUpdate(){var _props2=this.props,trigger=_props2.trigger,active=_props2.active;if(trigger===TriggerTypes.Manual){this.toggle(Boolean(this.props.active));}},componentWillUnmount:function componentWillUnmount(){var _this2=this;var _props3=this.props,node=_props3.node,trigger=_props3.trigger;if(node&&trigger){eventsForTrigger[trigger].forEach(function(event){node.removeEventListener(event,_this2.onHandleEvent,false);});}if(this.popper){this.popper.destroy();}getContainer().removeChild(this.el);$(document).off('graphPaddingUpdated',this.onGraphPaddingUpdated);},render:function render(){var _this3=this;var _props4=this.props,node=_props4.node,message=_props4.message,subtitle=_props4.subtitle,footer=_props4.footer,initialPlacement=_props4.placement,_props4$className=_props4.className,className=_props4$className===undefined?'':_props4$className;var _state=this.state,style=_state.style,placement=_state.placement;var cls=('tooltip fade '+(placement||initialPlacement||'')+' in '+className).trim();return ReactDOM.createPortal(React.createElement('div',{ref:function ref(r){_this3.tooltip=r;},className:cls,style:style},React.createElement('div',{className:'tooltip-arrow'}),React.createElement('div',{className:'tooltip-inner'},React.createElement('div',{className:'message'},message),subtitle?React.createElement('div',{className:'subtitle'},subtitle):null,footer?React.createElement('div',{className:'footer'},footer):null)),this.el);},onHandleEvent:function onHandleEvent(event){var _props5=this.props,node=_props5.node,trigger=_props5.trigger;if(node&&trigger===TriggerTypes.Focus){var show=event.type==='focus';this.toggle(show);}},toggle:function toggle(show){var _this4=this;var _props6=this.props,node=_props6.node,placement=_props6.placement,_props6$allowOverflow=_props6.allowOverflow,allowOverflow=_props6$allowOverflow===undefined?[]:_props6$allowOverflow,_props6$offset=_props6.offset,offset=_props6$offset===undefined?0:_props6$offset;var style=this.state.style;var visibility=show?undefined:'hidden';var priority=['left','right','top','bottom'];if(style.visibility!==visibility){if(this.popper){this.popper.destroy();this.popper=null;}if(show){var _ref;this.popper=new Popper(node,this.tooltip,{placement:placement,modifiers:{offset:{offset:offset},preventOverflow:{priority:allowOverflow.length?(_ref=_).without.apply(_ref,[priority].concat(_toConsumableArray(allowOverflow))):priority},applyStyle:{enabled:false},applyReactStyle:{enabled:true,order:900,fn:function fn(_ref2){var styles=_ref2.styles,placement=_ref2.placement;_this4.setState({placement:placement,style:styles});}}}});}else{this.setState({style:{visibility:visibility}});}}},onGraphPaddingUpdated:function onGraphPaddingUpdated(){if(this.popper){this.popper.scheduleUpdate();}}});return Tooltip;function getContainer(){var id='jsx-tooltip-container';if(!container){container=document.getElementById(id);if(!container){container=document.createElement('div');container.id=id;document.body.appendChild(container);}}return container;}});
//# sourceMappingURL=Tooltip.js.map
