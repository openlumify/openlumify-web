var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}define(['create-react-class','prop-types','react-virtualized-select'],function(createReactClass,PropTypes,_ref){var VirtualizedSelect=_ref.default;var GlyphSelector=createReactClass({displayName:'GlyphSelector',propTypes:{search:PropTypes.string,onSelected:PropTypes.func.isRequired},getInitialState:function getInitialState(){return{isLoading:true};},componentDidMount:function componentDidMount(){var _this=this;Promise.require('text!../imgc/sprites/glyphicons.json_array').then(function(json){var obj=JSON.parse(json);_this.setState({isLoading:false,options:obj.list});_this.checkForMatch();});},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this.checkForMatch(nextProps);},checkForMatch:function checkForMatch(props){var _state=this.state,value=_state.value,options=_state.options,similar=_state.similar;var _ref2=props||this.props,search=_ref2.search;if(!value&&options&&search&&search.length>2){var option=_.find(options,function(option){return option.label.toLowerCase().indexOf(search.toLowerCase())>=0;});if(option){if(option.value!==similar){this.setState({similar:option.value});this.props.onSelected(option.value);}}else if(similar){this.setState({similar:null});this.props.onSelected();}}},render:function render(){var _state2=this.state,_state2$value=_state2.value,value=_state2$value===undefined?null:_state2$value,_state2$options=_state2.options,options=_state2$options===undefined?[]:_state2$options,isLoading=_state2.isLoading,similar=_state2.similar;var _props=this.props,search=_props.search,rest=_objectWithoutProperties(_props,['search']);return React.createElement(VirtualizedSelect,_extends({options:options,simpleValue:true,clearable:true,searchable:true,value:_.isString(value)?value:similar,onChange:this.onChange,optionRenderer:GlyphOptionRenderer,optionHeight:28,isLoading:isLoading,placeholder:'Select Icon',valueRenderer:GlyphValueRenderer},rest));},onChange:function onChange(value){this.setState({value:value?value:''});if(!value){this.props.onSelected();}else{this.props.onSelected(value);}}});return GlyphSelector;function GlyphValueRenderer(option){return React.createElement('div',{style:{paddingLeft:'33px'},title:option.label},React.createElement('div',{className:'icon',style:{position:'absolute',left:'9px',top:'50%',backgroundImage:'url(imgc/sprites/glyphicons.png)',backgroundPosition:option.backgroundPosition,backgroundSize:option.backgroundSize,width:option.width,height:option.height,transform:'scale('+option.scale+') translate(0, -50%)',transformOrigin:'0 0',margin:'0'}}),option.label);}function GlyphOptionRenderer(_ref3){var focusedOption=_ref3.focusedOption,focusedOptionIndex=_ref3.focusedOptionIndex,focusOption=_ref3.focusOption,key=_ref3.key,labelKey=_ref3.labelKey,option=_ref3.option,optionIndex=_ref3.optionIndex,options=_ref3.options,selectValue=_ref3.selectValue,style=_ref3.style,valueArray=_ref3.valueArray;var className=['VirtualizedSelectOption'];if(option.className){className.push(option.className);}if(option===focusedOption){className.push('VirtualizedSelectFocusedOption');}if(option.disabled){className.push('VirtualizedSelectDisabledOption');}if(option.header){className.push('VirtualizedSelectHeader');}if(valueArray&&valueArray.indexOf(option)>=0){className.push('VirtualizedSelectSelectedOption');}var events=option.disabled?{}:{onClick:function onClick(){return selectValue(option);},onMouseOver:function onMouseOver(){return focusOption(option);}};var px=option.px;return React.createElement('div',_extends({className:className.join(' '),key:key,style:_extends({},style,{paddingLeft:'33px'}),title:option[labelKey]},events),React.createElement('div',{className:'icon',style:{position:'absolute',left:'7px',backgroundImage:'url(imgc/sprites/glyphicons.png)',backgroundPosition:option.backgroundPosition,backgroundSize:option.backgroundSize,width:option.width,height:option.height,transform:'scale('+option.scale+') translate(0, -50%)',transformOrigin:'0 0',top:'50%',margin:'0'}}),option[labelKey]);}});
//# sourceMappingURL=GlyphSelector.js.map
