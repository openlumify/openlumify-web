{"version":3,"sources":["../../../js/components/ontology/BaseSelect.jsx"],"names":["define","createReactClass","PropTypes","VirtualizedSelect","default","_counter","keyCounter","MaxValueLength","transformForInput","value","substring","createFixedCreatable","CreatablePutLast","props","filterOptions","_","wrap","fn","rest","filtered","apply","length","_createPlaceholderOption","push","shift","Creatable","BaseSelect","propTypes","onSelected","func","isRequired","valueKey","string","labelKey","options","array","createForm","creatable","bool","getInitialState","showForm","getDefaultProps","updateValue","setState","getOptionByValue","findWhere","componentDidMount","setupCreatable","componentWillReceiveProps","nextProps","key","state","iriKeys","isString","option","error","isObject","selectComponent","CreateForm","render","creating","type","formProps","defaultValue","disabled","placeholder","hasKey","Boolean","extendedFormProps","transformForSubmit","onCancel","onCreate","_virtualized","r","i18n","label","memoize","onNewOptionClick","nameOptionRenderer","depthKey","pathKey","transformed","trim","valid","matchesExisting","any","o","toLowerCase","reason","ref","Select","_getSelectComponent","Error","Promise","require","then","displayName","NameOptionRenderer","focusedOption","focusedOptionIndex","focusOption","optionIndex","selectValue","style","valueArray","className","header","indexOf","events","onClick","onMouseOver","indent","join","iconStyles","domainGlyphIconHref","backgroundSize","paddingLeft","displayNameSub","glyphIconHref","backgroundImage","rangeGlyphIconHref","display","alignItems","margin","width"],"mappings":"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","file":"BaseSelect.js","sourcesContent":["define([\n    'create-react-class',\n    'prop-types',\n    'react-virtualized-select'\n], function(\n    createReactClass,\n    PropTypes,\n    { default: VirtualizedSelect }) {\n\n    var _counter = 1;\n    const keyCounter = () => _counter++;\n\n    const MaxValueLength = 50;\n    const transformForInput = value => (value || '').substring(0, MaxValueLength);\n\n    const createFixedCreatable = Creatable => {\n        class CreatablePutLast extends Creatable {\n            constructor(props) {\n                super(props);\n\n                // Wrap filter options to move the create option to last\n                // This will be a valid configuration in future releases\n                // https://github.com/JedWatson/react-select/pull/1436\n                this.filterOptions = _.wrap(this.filterOptions, (fn, ...rest) => {\n                    const filtered = fn.apply(this, rest);\n                    if (filtered.length > 1 && filtered[0] === this._createPlaceholderOption) {\n                        filtered.push(filtered.shift());\n                    }\n                    return filtered;\n                })\n            }\n        }\n        return CreatablePutLast;\n    };\n\n    const BaseSelect = createReactClass({\n        propTypes: {\n            onSelected: PropTypes.func.isRequired,\n            valueKey: PropTypes.string.isRequired,\n            labelKey: PropTypes.string.isRequired,\n            options: PropTypes.array.isRequired,\n            createForm: PropTypes.string,\n            value: PropTypes.string,\n            creatable: PropTypes.bool\n        },\n        getInitialState() {\n            return { showForm: false }\n        },\n        getDefaultProps() {\n            return { creatable: true, labelKey: 'displayName', valueKey: 'title' }\n        },\n        updateValue(value) {\n            this.setState({ value })\n\n            if (!value) {\n                this.props.onSelected();\n            } else {\n                this.props.onSelected(this.getOptionByValue(value))\n            }\n        },\n        getOptionByValue(value, props) {\n            const { valueKey, options } = props || this.props;\n            return _.findWhere(options, { [valueKey]: value });\n        },\n        componentDidMount() {\n            if (this.props.creatable) {\n                this.setupCreatable(this.props)\n            }\n        },\n        componentWillReceiveProps(nextProps) {\n            const { key } = this.state;\n            if (key && nextProps.iriKeys && nextProps.iriKeys[key]) {\n                const value = nextProps.iriKeys[key];\n                if (_.isString(value)) {\n                    const option = this.getOptionByValue(value, nextProps);\n                    if (option) {\n                        this.setState({ value, key: false, error: null })\n                        this.props.onSelected(option);\n                    }\n                } else if (_.isObject(value) && 'error' in value) {\n                    this.setState({ key: false, showForm: true, error: value.error || 'Server Error' })\n                }\n            } else if (nextProps.value !== (this.state.value || this.props.value)) {\n                this.setState({ value: nextProps.value })\n            }\n            if (nextProps.creatable !== this.props.creatable) {\n                if (nextProps.creatable) {\n                    this.setupCreatable(nextProps);\n                } else {\n                    this.setState({ selectComponent: null, CreateForm: null })\n                }\n            }\n        },\n        render() {\n            const { creating, showForm, value, CreateForm, selectComponent, key, error, type } = this.state;\n            const { formProps, value: defaultValue, creatable, createForm, disabled, placeholder, ...rest } = this.props;\n            const hasKey = Boolean(key);\n            const extendedFormProps = {\n                ...(formProps || {}),\n                type,\n                transformForSubmit: this.transformForSubmit,\n                transformForInput\n            };\n\n            return (\n                <div>\n                {\n                    (creating && showForm && CreateForm) ? (\n                        <CreateForm\n                            displayName={creating}\n                            onCancel={this.onCancel}\n                            onCreate={this.onCreate}\n                            error={error}\n                            {...extendedFormProps} />\n                    ) : (\n                        <VirtualizedSelect\n                            ref={r => { this._virtualized = r}}\n                            simpleValue\n                            clearable\n                            searchable\n                            isLoading={hasKey}\n                            disabled={disabled || hasKey}\n                            placeholder={hasKey ?\n                                i18n('ontology.selector.placeholder') : placeholder}\n                            selectComponent={selectComponent}\n                            promptTextCreator={label => i18n('ontology.selector.prompt', label) }\n                            // Bug in Creatable? that the default optioncreator doesn't\n                            // work when create option is not first because it's\n                            // returning a new object. Memoize on label to fix\n                            newOptionCreator={_.memoize(({ label, labelKey, valueKey }) => ({\n                                [valueKey]: label,\n                                [labelKey]: label,\n                                className: 'Select-create-option-placeholder'\n                            }), ({ label }) => label)}\n                            value={_.isString(value) ? value : defaultValue}\n                            onChange={this.updateValue}\n                            onNewOptionClick={this.onNewOptionClick}\n                            optionRenderer={nameOptionRenderer(this.props.depthKey, this.props.pathKey)}\n                            optionHeight={28}\n                            matchProp=\"label\"\n                            {...rest}\n                        />\n                    )\n                }\n                </div>\n            );\n        },\n        transformForSubmit(value) {\n            const { options, labelKey } = this.props;\n            const transformed = transformForInput(value).trim();\n            const valid = transformed.length > 0;\n            const matchesExisting = valid && _.any(\n                options,\n                o => o[labelKey].toLowerCase() === transformed.toLowerCase());\n\n            if (matchesExisting) {\n                return {\n                    valid: false,\n                    value: transformed,\n                    reason: i18n('ontology.form.displayname.error.duplicate')\n                };\n            }\n            return {\n                valid,\n                value: transformed,\n                reason: valid ? null : i18n('ontology.form.displayname.error.empty')\n            };\n        },\n        setupCreatable(props) {\n            // Hack to get the internal Creatable from the Select dependency of\n            // virtualized. Requiring 'react-select' in amd doesn't work\n            const ref = this._virtualized;\n            const Select = ref._getSelectComponent();\n            if (Select) {\n                const { Creatable } = Select;\n                this.setState({ selectComponent: createFixedCreatable(Creatable) });\n            } else {\n                throw new Error('Internal structure of select has changed');\n            }\n            if (props.createForm) {\n                Promise.require(props.createForm).then(CreateForm => {\n                    this.setState({ CreateForm })\n                })\n            } else throw new Error('Create form prop required when creatable')\n        },\n        onCancel() {\n            this.setState({ showForm: false })\n        },\n        onCreate(option) {\n            const { valid, value } = this.transformForSubmit(option.displayName);\n            if (valid) {\n                option.displayName = value;\n                const key = keyCounter();\n                this.props.onCreate(option, { key });\n                const { type, displayName } = option;\n                this.setState({ showForm: false, key, creating: displayName, type })\n            }\n        },\n        onNewOptionClick(option) {\n            this.setState({ showForm: true, error: null, creating: option[this.props.labelKey], type: null })\n            this.props.onSelected();\n        }\n    });\n\n    return BaseSelect;\n\n    function nameOptionRenderer(depthKey = 'depth', pathKey = 'path') {\n        return function NameOptionRenderer({\n            focusedOption, focusedOptionIndex, focusOption,\n            key, labelKey,\n            option, optionIndex, options,\n            selectValue,\n            style,\n            valueArray\n        }) {\n            const className = ['VirtualizedSelectOption']\n            if (option.className) {\n                className.push(option.className);\n            }\n            if (option === focusedOption) {\n                className.push('VirtualizedSelectFocusedOption')\n            }\n            if (option.disabled) {\n                className.push('VirtualizedSelectDisabledOption')\n            }\n            if (option.header) {\n                className.push('VirtualizedSelectHeader');\n            }\n            if (valueArray && valueArray.indexOf(option) >= 0) {\n                className.push('VirtualizedSelectSelectedOption')\n            }\n            const events = option.disabled ? {} : {\n                onClick: () => selectValue(option),\n                onMouseOver: () => focusOption(option)\n            };\n            const indent = (option[depthKey] || 0) * 15;\n\n            if (option.header) {\n                return (\n                    <div\n                        className={className.join(' ')}\n                        key={key}\n                        style={style}\n                    >\n                        {option[labelKey]}\n                    </div>\n                );\n            }\n\n            const iconStyles = option.domainGlyphIconHref ? { backgroundSize: 'auto 80%' } : {};\n\n            return (\n                <div className={className.join(' ')}\n                    key={key}\n                    style={{ ...style, paddingLeft: `${indent}px` }}\n                    title={`${option[pathKey] || option[labelKey]}${ option.displayNameSub ? `\\n${option.displayNameSub}` : ''}`}\n                    {...events}>\n                    {\n                        option.glyphIconHref ? (\n                            <div className=\"icon\" style={{ ...iconStyles, backgroundImage: `url(${option.glyphIconHref})` }} />\n                        ) : (option.domainGlyphIconHref && option.rangeGlyphIconHref) ? (\n                            <div style={{ display: 'inline-flex', alignItems: 'center' }}>\n                            <div className=\"icon\" style={{ ...iconStyles, margin: '0 0 0 5px', backgroundImage: `url(${option.domainGlyphIconHref})` }} />\n                            →\n                            <div className=\"icon\" style={{ ...iconStyles, margin: '0 5px 0 0', backgroundImage: `url(${option.rangeGlyphIconHref})` }} />\n                            </div>\n                        ) : (\n                            <div className=\"icon\" style={{ width: '6px', margin: '0' }} />\n                        )\n                    }\n                    {option[labelKey]}\n                </div>\n            );\n        }\n    }\n});\n"]}