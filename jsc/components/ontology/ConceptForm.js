define(['create-react-class','classnames','prop-types','./ConceptSelector','../field/GlyphSelector','../field/ColorSelector','../Alert'],function(createReactClass,classNames,PropTypes,ConceptsSelector,GlyphSelector,ColorSelector,Alert){var ConceptForm=createReactClass({displayName:'ConceptForm',propTypes:{transformForSubmit:PropTypes.func.isRequired,transformForInput:PropTypes.func.isRequired,onCreate:PropTypes.func.isRequired,onCancel:PropTypes.func.isRequired,displayName:PropTypes.string},getInitialState:function getInitialState(){return{};},getValue:function getValue(){var displayName=this.state.displayName;var defaultValue=this.props.displayName;return _.isString(displayName)?displayName:defaultValue;},render:function render(){var _props=this.props,transformForSubmit=_props.transformForSubmit,transformForInput=_props.transformForInput;var color=this.state.color;var value=this.getValue();var valueForInput=transformForInput(value);var _transformForSubmit=transformForSubmit(value),valid=_transformForSubmit.valid,reason=_transformForSubmit.reason,valueForSubmit=_transformForSubmit.value;var disabled=!valid;return React.createElement('div',{className:'ontology-form'},this.props.error?React.createElement(Alert,{error:this.props.error}):null,React.createElement('input',{type:'text',placeholder:i18n('ontology.form.displayname.placeholder'),onChange:this.onDisplayNameChange,title:reason,className:classNames({invalid:!valid}),value:valueForInput}),React.createElement(ConceptsSelector,{value:this.state.parentConcept,placeholder:i18n('ontology.concept.inherit.placeholder'),creatable:false,onSelected:this.onConceptSelected}),React.createElement(ColorSelector,{value:color,onSelected:this.onColorSelected}),React.createElement(GlyphSelector,{placeholder:i18n('ontology.concept.icon.placeholder'),search:value,onSelected:this.onIconSelected}),React.createElement('div',{className:'base-select-form-buttons'},React.createElement('button',{onClick:this.props.onCancel,className:'btn btn-link btn-small'},i18n('ontology.form.cancel.button')),React.createElement('button',{disabled:disabled,onClick:this.onCreate,className:'btn btn-small btn-primary'},disabled?i18n('ontology.form.create.button'):i18n('ontology.form.create.value.button',valueForSubmit))));},onColorSelected:function onColorSelected(color){this.setState({color:color});},onIconSelected:function onIconSelected(imgSrc){this.setState({imgSrc:imgSrc});},onConceptSelected:function onConceptSelected(option){var newState={parentConcept:null,color:null};if(option){newState.color=option.color;newState.parentConcept=option.title;}this.setState(newState);},onDisplayNameChange:function onDisplayNameChange(event){this.setState({displayName:event.target.value});},onCreate:function onCreate(){var _state=this.state,parentConcept=_state.parentConcept,color=_state.color,imgSrc=_state.imgSrc;this.props.onCreate({parentConcept:parentConcept,displayName:this.getValue(),glyphIconHref:imgSrc,color:color||'rgb(0,0,0)'});}});return ConceptForm;});
//# sourceMappingURL=ConceptForm.js.map
