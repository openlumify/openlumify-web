{"version":3,"sources":["../../../../js/configuration/admin/utils/withFormHelpers.js"],"names":["define","alertTemplate","i18n","withFormHelpers","showSuccess","message","$node","find","remove","prepend","showError","hideError","error","handleSubmitButton","button","promise","$button","$","text","prop","progress","v","require","F","number","percent","finally"],"mappings":"AAAAA,OAAO,CACH,gBADG,CAEH,eAFG,CAAP,CAGG,SAASC,aAAT,CAAwBC,IAAxB,CAA8B,CAC7B,aAEA,MAAOC,gBAAP,CAEA,QAASA,gBAAT,EAA2B,CAEvB,KAAKC,WAAL,CAAmB,SAASC,OAAT,CAAkB,CACjC,KAAKC,KAAL,CAAWC,IAAX,CAAgB,QAAhB,EAA0BC,MAA1B,GACA,KAAKF,KAAL,CAAWG,OAAX,CAAmBR,cAAc,CAAEI,QAASA,SAAWH,KAAK,sBAAL,CAAtB,CAAd,CAAnB,EACH,CAHD,CAIA,KAAKQ,SAAL,CAAiB,SAASL,OAAT,CAAkB,CAC/B,KAAKM,SAAL,GACA,KAAKL,KAAL,CAAWG,OAAX,CAAmBR,cAAc,CAAEW,MAAOP,SAAWH,KAAK,oBAAL,CAApB,CAAd,CAAnB,EACH,CAHD,CAIA,KAAKS,SAAL,CAAiB,UAAW,CACxB,KAAKL,KAAL,CAAWC,IAAX,CAAgB,QAAhB,EAA0BC,MAA1B,GACH,CAFD,CAGA,KAAKK,kBAAL,CAA0B,SAASC,MAAT,CAAiBC,OAAjB,CAA0B,CAChD,GAAIC,SAAUC,EAAEH,MAAF,CAAd,CACII,KAAOF,QAAQE,IAAR,EADX,CAGAF,QAAQG,IAAR,CAAa,UAAb,CAAyB,IAAzB,EAEA,GAAIJ,QAAQK,QAAZ,CAAsB,CAClBL,QAAQK,QAAR,CAAiB,SAASC,CAAT,CAAY,CACzBC,QAAQ,CAAC,iBAAD,CAAR,CAA6B,SAASC,CAAT,CAAY,CACrCP,QAAQE,IAAR,CAAaK,EAAEC,MAAF,CAASC,OAAT,CAAiBJ,CAAjB,EAAsB,GAAtB,CAA4BH,IAAzC,EACH,CAFD,EAGH,CAJD,EAKH,CAED,MAAOH,SAAQW,OAAR,CAAgB,UAAW,CAC9BV,QAAQG,IAAR,CAAa,UAAb,CAAyB,KAAzB,EAAgCD,IAAhC,CAAqCA,IAArC,EACH,CAFM,CAAP,CAGH,CAjBD,CAkBH,CACJ,CAxCD","file":"withFormHelpers.js","sourcesContent":["define([\n    'tpl!util/alert',\n    'util/messages'\n], function(alertTemplate, i18n) {\n    'use strict';\n\n    return withFormHelpers;\n\n    function withFormHelpers() {\n\n        this.showSuccess = function(message) {\n            this.$node.find('.alert').remove();\n            this.$node.prepend(alertTemplate({ message: message || i18n('admin.plugin.success') }));\n        };\n        this.showError = function(message) {\n            this.hideError();\n            this.$node.prepend(alertTemplate({ error: message || i18n('admin.plugin.error') }));\n        };\n        this.hideError = function() {\n            this.$node.find('.alert').remove();\n        };\n        this.handleSubmitButton = function(button, promise) {\n            var $button = $(button),\n                text = $button.text();\n\n            $button.prop('disabled', true);\n\n            if (promise.progress) {\n                promise.progress(function(v) {\n                    require(['util/formatters'], function(F) {\n                        $button.text(F.number.percent(v) + ' ' + text);\n                    });\n                })\n            }\n\n            return promise.finally(function() {\n                $button.prop('disabled', false).text(text);\n            });\n        };\n    }\n});\n"]}