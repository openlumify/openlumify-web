{"version":3,"sources":["../../js/activity/handlers.js"],"names":["define","F","type","kind","eventNames","titleRenderer","el","datum","textContent","eventData","title","autoDismiss","task","i18n","destination","config","_","isString","configuration","JSON","parse","number","itemsCount","plural","titleKey","allowCancel","finishedComponentPath","process","require","withDataRequest","dataRequest","workspaceId","vertexIds","outVertexId","inVertexId","done","vertices","length","source","vertex","dest","string","truncate","$","css","fontSize","text","hops","appendTo","onRemove","trigger"],"mappings":"AACAA,OAAO,CAAC,iBAAD,CAAP,CAA4B,SAASC,CAAT,CAAY,CACpC,aAEA,MAAO,CACH,CACIC,KAAM,eADV,CAEIC,KAAM,cAFV,CAGIC,WAAY,CAAC,iBAAD,CAAoB,gBAApB,CAHhB,CAIIC,cAAe,uBAASC,EAAT,CAAaC,KAAb,CAAoB,CAC/BD,GAAGE,WAAH,CAAiBD,MAAME,SAAN,CAAgBC,KAAjC,CACH,CANL,CAOIC,YAAa,IAPjB,CADG,CAUH,CACIT,KAAM,6BADV,CAEIC,KAAM,sBAFV,CAGIE,cAAe,uBAASC,EAAT,CAAaM,IAAb,CAAmB,CAC9B,GAAMV,MAAOW,KAAQD,KAAKE,WAAb,UAAb,CACA,GAAMC,QAASC,EAAEC,QAAF,CAAWL,KAAKM,aAAhB,EAAiCC,KAAKC,KAAL,CAAWR,KAAKM,aAAhB,CAAjC,CAAkEN,KAAKM,aAAtF,CACA,GAAMG,QAASN,OAAOO,UAAtB,CACA,GAAMC,QAASF,SAAW,CAAX,CAAe,EAAf,CAAoB,GAAnC,CACA,GAAMG,UAAW,uDAAjB,CAEAlB,GAAGE,WAAH,CAAiBK,KAAKW,QAAL,CAAeH,MAAf,CAAuBE,MAAvB,CAA+BrB,IAA/B,CAAjB,CACH,CAXL,CAYIS,YAAa,KAZjB,CAaIc,YAAa,IAbjB,CAcIC,sBAAuB,8BAd3B,CAVG,CA0BH,CACIxB,KAAM,UADV,CAEIC,KAAM,oBAFV,CAGIE,cAAe,uBAASC,EAAT,CAAaqB,OAAb,CAAsB,CACjCC,QAAQ,CACJ,sBADI,CAEJ,wBAFI,CAAR,CAGG,SAASC,eAAT,CAA0B5B,CAA1B,CAA6B,CAC5B4B,gBAAgBC,WAAhB,CAA4B,QAA5B,CAAsC,OAAtC,CAA+C,CAC3CC,YAAaJ,QAAQI,WADsB,CAE3CC,UAAW,CACPL,QAAQM,WADD,CAEPN,QAAQO,UAFD,CAFgC,CAA/C,EAMGC,IANH,CAMQ,SAASC,QAAT,CAAmB,CACvB,GAAIA,SAASC,MAAT,GAAoB,CAAxB,CAA2B,CACvB,GAAIC,QAASrC,EAAEsC,MAAF,CAAS7B,KAAT,CAAe0B,SAAS,CAAT,CAAf,CAAb,CACII,KAAOvC,EAAEsC,MAAF,CAAS7B,KAAT,CAAe0B,SAAS,CAAT,CAAf,CADX,CAGA9B,GAAGE,WAAH,CAAiBP,EAAEwC,MAAF,CAASC,QAAT,CAAkBJ,MAAlB,CAA0B,CAA1B,EAA+B,KAA/B,CAAuCrC,EAAEwC,MAAF,CAASC,QAAT,CAAkBF,IAAlB,CAAwB,CAAxB,CAAxD,CACAG,EAAE,OAAF,EACKC,GADL,CACS,CAAEC,SAAU,KAAZ,CADT,EAEKC,IAFL,CAEUjC,KAAK,gCAAL,CAAuCc,QAAQoB,IAA/C,CAFV,EAGKC,QAHL,CAGc1C,EAHd,EAIH,CACJ,CAjBD,EAkBH,CAtBD,EAuBH,CA3BL,CA4BI2C,SAAU,mBAAW,CACjB,KAAKC,OAAL,CAAa,cAAb,EACH,CA9BL,CA+BIxB,sBAAuB,2BA/B3B,CA1BG,CAAP,CA4DH,CA/DD","file":"handlers.js","sourcesContent":["\ndefine(['util/formatters'], function(F) {\n    'use strict';\n\n    return [\n        {\n            type: 'saveWorkspace',\n            kind: 'eventWatcher',\n            eventNames: ['workspaceSaving', 'workspaceSaved'],\n            titleRenderer: function(el, datum) {\n                el.textContent = datum.eventData.title;\n            },\n            autoDismiss: true\n        },\n        {\n            type: 'org-openlumify-ingest-cloud',\n            kind: 'longRunningProcesses',\n            titleRenderer: function(el, task) {\n                const type = i18n(`${task.destination}.title`);\n                const config = _.isString(task.configuration) ? JSON.parse(task.configuration) : task.configuration;\n                const number = config.itemsCount;\n                const plural = number === 1 ? '' : 's';\n                const titleKey = 'activity.tasks.type.org-openlumify-ingest-cloud.title';\n\n                el.textContent = i18n(titleKey, number, plural, type);\n            },\n            autoDismiss: false,\n            allowCancel: true,\n            finishedComponentPath: 'activity/builtin/CloudImport'\n        },\n        {\n            type: 'findPath',\n            kind: 'longRunningProcess',\n            titleRenderer: function(el, process) {\n                require([\n                    'util/withDataRequest',\n                    'util/vertex/formatters'\n                ], function(withDataRequest, F) {\n                    withDataRequest.dataRequest('vertex', 'store', {\n                        workspaceId: process.workspaceId,\n                        vertexIds: [\n                            process.outVertexId,\n                            process.inVertexId\n                        ]\n                    }).done(function(vertices) {\n                        if (vertices.length === 2) {\n                            var source = F.vertex.title(vertices[0]),\n                                dest = F.vertex.title(vertices[1]);\n\n                            el.textContent = F.string.truncate(source, 8) + ' â†’ ' + F.string.truncate(dest, 8);\n                            $('<div>')\n                                .css({ fontSize: '90%' })\n                                .text(i18n('popovers.find_path.hops.option', process.hops))\n                                .appendTo(el);\n                        }\n                    });\n                });\n            },\n            onRemove: function() {\n                this.trigger('defocusPaths');\n            },\n            finishedComponentPath: 'activity/builtin/findPath'\n        }\n    ];\n})\n"]}