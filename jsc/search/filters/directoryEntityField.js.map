{"version":3,"sources":["../../../js/search/filters/directoryEntityField.js"],"names":["define","defineComponent","DirectoryEntityField","DirectoryCurrentUserField","template","DirectoryEntityFieldAbsoluteCurrent","attributes","fieldSelector","wrapperSelector","switchSelector","value","onlySearchable","focus","property","after","$node","html","on","onSwitch","toggle","isCurrentUserValue","attr","_","isObject","event","toCurrentUser","$","target","hasClass","$field","select","teardownAllComponents","attachTo","toggleClass"],"mappings":"AAAAA,OAAO,CACH,sBADG,CAEH,yBAFG,CAGH,8BAHG,CAIH,+BAJG,CAAP,CAKG,SACCC,eADD,CAECC,oBAFD,CAGCC,yBAHD,CAICC,QAJD,CAIW,CACV,aAEA,MAAOH,iBAAgBI,mCAAhB,CAAP,CAEA,QAASA,oCAAT,EAA+C,CAE3C,KAAKC,UAAL,CAAgB,CACZC,cAAe,yBADH,CAEZC,gBAAiB,qCAFL,CAGZC,eAAgB,2CAHJ,CAIZC,MAAO,EAJK,CAKZC,eAAgB,IALJ,CAMZC,MAAO,IANK,CAOZC,SAAU,IAPE,CAAhB,EAUA,KAAKC,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,KAAKC,KAAL,CAAWC,IAAX,CAAgBZ,SAAS,EAAT,CAAhB,EAEA,KAAKa,EAAL,CAAQ,OAAR,CAAiB,CACbR,eAAgB,KAAKS,QADR,CAAjB,EAIA,KAAKC,MAAL,CAAY,KAAKC,kBAAL,CAAwB,KAAKC,IAAL,CAAUX,KAAlC,CAAZ,EACH,CARD,EAUA,KAAKU,kBAAL,CAA0B,SAASV,KAAT,CAAgB,CACtC,MAAOY,GAAEC,QAAF,CAAWb,KAAX,GAAsB,eAAiBA,MAA9C,CACH,CAFD,CAIA,KAAKQ,QAAL,CAAgB,SAASM,KAAT,CAAgB,CAC5B,GAAIC,eAAgBC,EAAEF,MAAMG,MAAR,EAAgBC,QAAhB,CAAyB,qBAAzB,CAApB,CACA,KAAKT,MAAL,CAAYM,aAAZ,EACH,CAHD,CAKA,KAAKN,MAAL,CAAc,SAASM,aAAT,CAAwB,CAClC,GAAII,QAAS,KAAKC,MAAL,CAAY,eAAZ,EAA6BC,qBAA7B,EAAb,CACA,GAAIN,aAAJ,CAAmB,CACftB,0BAA0B6B,QAA1B,CAAmCH,MAAnC,CAA2C,KAAKR,IAAhD,EACH,CAFD,IAEO,CACHnB,qBAAqB8B,QAArB,CAA8BH,MAA9B,CAAsC,KAAKR,IAA3C,EACH,CAED,KAAKS,MAAL,CAAY,iBAAZ,EAA+BG,WAA/B,CAA2C,cAA3C,CAA2DR,aAA3D,EACH,CATD,CAUH,CACJ,CAxDD","file":"directoryEntityField.js","sourcesContent":["define([\n    'flight/lib/component',\n    'fields/directory/entity',\n    'fields/directory/currentUser',\n    './directoryEntityFieldTpl.hbs'\n], function(\n    defineComponent,\n    DirectoryEntityField,\n    DirectoryCurrentUserField,\n    template) {\n    'use strict';\n\n    return defineComponent(DirectoryEntityFieldAbsoluteCurrent);\n\n    function DirectoryEntityFieldAbsoluteCurrent() {\n\n        this.attributes({\n            fieldSelector: '.directory-entity-field',\n            wrapperSelector: '.directory-entity-field-filter-wrap',\n            switchSelector: '.switch-choose-user, .switch-current-user',\n            value: '',\n            onlySearchable: null,\n            focus: null,\n            property: null\n        });\n\n        this.after('initialize', function() {\n            this.$node.html(template({}));\n\n            this.on('click', {\n                switchSelector: this.onSwitch\n            });\n\n            this.toggle(this.isCurrentUserValue(this.attr.value));\n        });\n\n        this.isCurrentUserValue = function(value) {\n            return _.isObject(value) && ('currentUser' in value);\n        };\n\n        this.onSwitch = function(event) {\n            var toCurrentUser = $(event.target).hasClass('switch-current-user');\n            this.toggle(toCurrentUser);\n        };\n\n        this.toggle = function(toCurrentUser) {\n            var $field = this.select('fieldSelector').teardownAllComponents();\n            if (toCurrentUser) {\n                DirectoryCurrentUserField.attachTo($field, this.attr);\n            } else {\n                DirectoryEntityField.attachTo($field, this.attr);\n            }\n\n            this.select('wrapperSelector').toggleClass('current-user', toCurrentUser);\n        };\n    }\n});\n"]}