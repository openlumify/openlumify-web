{"version":3,"sources":["../../../js/search/filters/dateField.js"],"names":["define","defineComponent","DateField","DateRelativeField","template","DateFieldAbsoluteRelative","defaultAttrs","fieldSelector","wrapperSelector","switchSelector","after","$node","html","on","onSwitch","toggle","isRelativeValue","attr","value","_","isObject","event","toRelative","$","target","hasClass","$field","select","teardownAllComponents","attachTo","toggleClass"],"mappings":"AAAAA,OAAO,CAAE,sBAAF,CACH,aADG,CAEH,qBAFG,CAGH,oBAHG,CAAP,CAIG,SACCC,eADD,CAECC,SAFD,CAGCC,iBAHD,CAICC,QAJD,CAIW,CACV,aAEA,MAAOH,iBAAgBI,yBAAhB,CAAP,CAEA,QAASA,0BAAT,EAAqC,CAEjC,KAAKC,YAAL,CAAkB,CACdC,cAAe,aADD,CAEdC,gBAAiB,yBAFH,CAGdC,eAAgB,oCAHF,CAAlB,EAMA,KAAKC,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,KAAKC,KAAL,CAAWC,IAAX,CAAgBR,SAAS,EAAT,CAAhB,EAEA,KAAKS,EAAL,CAAQ,OAAR,CAAiB,CACbJ,eAAgB,KAAKK,QADR,CAAjB,EAIA,KAAKC,MAAL,CAAY,KAAKC,eAAL,CAAqB,KAAKC,IAAL,CAAUC,KAA/B,CAAZ,EACH,CARD,EAUA,KAAKF,eAAL,CAAuB,SAASE,KAAT,CAAgB,CACnC,MAAOC,GAAEC,QAAF,CAAWF,KAAX,GACF,UAAYA,MADV,EAEF,QAAUA,MAFf,CAGH,CAJD,CAMA,KAAKJ,QAAL,CAAgB,SAASO,KAAT,CAAgB,CAC5B,GAAIC,YAAaC,EAAEF,MAAMG,MAAR,EAAgBC,QAAhB,CAAyB,iBAAzB,CAAjB,CACA,KAAKV,MAAL,CAAYO,UAAZ,EACH,CAHD,CAKA,KAAKP,MAAL,CAAc,SAASO,UAAT,CAAqB,CAC/B,GAAII,QAAS,KAAKC,MAAL,CAAY,eAAZ,EAA6BC,qBAA7B,EAAb,CACA,GAAIN,UAAJ,CAAgB,CACZnB,kBAAkB0B,QAAlB,CAA2BH,MAA3B,CAAmC,KAAKT,IAAxC,EACH,CAFD,IAEO,CACHf,UAAU2B,QAAV,CAAmBH,MAAnB,CAA2B,KAAKT,IAAhC,EACH,CAED,KAAKU,MAAL,CAAY,iBAAZ,EAA+BG,WAA/B,CAA2C,UAA3C,CAAuDR,UAAvD,EACH,CATD,CAUH,CACJ,CArDD","file":"dateField.js","sourcesContent":["define([ 'flight/lib/component',\n    'fields/date',\n    'fields/dateRelative',\n    './dateFieldTpl.hbs'\n], function(\n    defineComponent,\n    DateField,\n    DateRelativeField,\n    template) {\n    'use strict';\n\n    return defineComponent(DateFieldAbsoluteRelative);\n\n    function DateFieldAbsoluteRelative() {\n\n        this.defaultAttrs({\n            fieldSelector: '.date-field',\n            wrapperSelector: '.date-field-filter-wrap',\n            switchSelector: '.switch-absolute, .switch-relative'\n        })\n\n        this.after('initialize', function() {\n            this.$node.html(template({}));\n\n            this.on('click', {\n                switchSelector: this.onSwitch\n            });\n\n            this.toggle(this.isRelativeValue(this.attr.value));\n        });\n\n        this.isRelativeValue = function(value) {\n            return _.isObject(value) &&\n                ('amount' in value) &&\n                ('unit' in value);\n        };\n\n        this.onSwitch = function(event) {\n            var toRelative = $(event.target).hasClass('switch-relative');\n            this.toggle(toRelative);\n        };\n\n        this.toggle = function(toRelative) {\n            var $field = this.select('fieldSelector').teardownAllComponents();\n            if (toRelative) {\n                DateRelativeField.attachTo($field, this.attr);\n            } else {\n                DateField.attachTo($field, this.attr);\n            }\n\n            this.select('wrapperSelector').toggleClass('relative', toRelative);\n        }\n    }\n});\n"]}