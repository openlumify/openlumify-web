var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};define(['create-react-class','prop-types','jstz','util/formatters','util/withDataRequest','./TimeZoneDropDown'],function(createReactClass,PropTypes,jstz,F,withDataRequest,TimeZoneDropDown){'use strict';var TimeZoneSetting=createReactClass({displayName:'TimeZoneSetting',getInitialState:function getInitialState(){var prefs=F.timezone.getPreferences();return _extends({},prefs,{disabled:false});},handleDetectChange:function handleDetectChange(evt){this.savePreferences({detect:evt.target.checked,timeZone:evt.target.checked?jstz.determine().name():this.state.timeZone});},handleTimeZoneChange:function handleTimeZoneChange(tzName){this.savePreferences({detect:false,timeZone:tzName});},savePreferences:function savePreferences(preferences){var _this=this;withDataRequest.dataRequest('user','preference','org.openlumify.timezone',JSON.stringify(preferences)).then(function(){openlumifyData.currentUser.uiPreferences['org.openlumify.timezone']=JSON.stringify(preferences);F.timezone.setCurrentTimezone(null);_this.setState(_extends({},preferences,{disabled:false}));});},render:function render(){return React.createElement('div',null,React.createElement('div',{className:'display-name'},i18n(this.props.setting.displayName)),React.createElement('div',{style:{display:'block'}},React.createElement(TimeZoneDropDown,{disabled:this.state.disabled||this.state.detect,onChange:this.handleTimeZoneChange,value:this.state.timeZone}),React.createElement('label',{style:{display:'inline'}},React.createElement('input',{type:'checkbox',disabled:this.state.disabled,style:{marginLeft:'.5em',marginBottom:'4px',display:'inline'},checked:this.state.detect,onChange:this.handleDetectChange}),' ',i18n('org.openlumify.user.account.page.setting.timezone.field.detect'))));}});return TimeZoneSetting;});
//# sourceMappingURL=TimeZoneSetting.js.map
