{"version":3,"sources":["../../../js/workspaces/userAccount/userAccount.js"],"names":["define","defineComponent","listTemplate","Attacher","ACCESS_EXTENSION_PAGE","identifier","pageComponentPath","SETTINGS_EXTENSION_PAGE","UserAccount","defaultAttrs","listSelector","listItemSelector","pageSelector","after","$node","remove","_attacher","teardown","self","on","onChangePage","require","registry","pages","extensionsForPoint","_","findWhere","registerExtension","push","select","html","chain","map","page","displayName","i18n","sortBy","value","find","eq","trigger","event","componentPath","$","target","closest","siblings","removeClass","end","addClass","data","container","teardownAllComponents","node","path","attach"],"mappings":"AAAAA,OAAO,CACH,sBADG,CAEH,gBAFG,CAGH,yBAHG,CAAP,CAIG,SACCC,eADD,CAECC,YAFD,CAGCC,QAHD,CAGW,CACV,aAEA,GAAMC,uBAAwB,CAC1BC,WAAY,QADc,CAE1BC,kBAAmB,8CAFO,CAA9B,CAKA,GAAMC,yBAA0B,CAC5BF,WAAY,UADgB,CAE5BC,kBAAmB,kDAFS,CAAhC,CAKA,MAAOL,iBAAgBO,WAAhB,CAAP,CAEA,QAASA,YAAT,EAAuB,CAEnB,KAAKC,YAAL,CAAkB,CACdC,aAAc,oBADA,CAEdC,iBAAkB,yBAFJ,CAGdC,aAAc,qBAHA,CAAlB,EAMA,KAAKC,KAAL,CAAW,UAAX,CAAuB,UAAW,CAC9B,KAAKC,KAAL,CAAWC,MAAX,GACA,GAAI,KAAKC,SAAT,CAAoB,CAChB,KAAKA,SAAL,CAAeC,QAAf,GACH,CACJ,CALD,EAOA,KAAKJ,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,GAAIK,MAAO,IAAX,CAEA,KAAKC,EAAL,CAAQ,QAAR,CAAkB,KAAKF,QAAvB,EAEA,KAAKE,EAAL,CAAQ,OAAR,CAAiB,CACbR,iBAAkB,KAAKS,YADV,CAAjB,EAIAC,QAAQ,CAAC,gCAAD,CAAR,CAA4C,SAASC,QAAT,CAAmB,CAC3D,GAAIC,OAAQD,SAASE,kBAAT,CAA4B,kCAA5B,CAAZ,CACA,GAAI,CAACC,EAAEC,SAAF,CAAYH,KAAZ,CAAmB,CAAElB,WAAYE,wBAAwBF,UAAtC,CAAnB,CAAL,CAA6E,CACzEiB,SAASK,iBAAT,CAA2B,kCAA3B,CAA+DpB,uBAA/D,EACAgB,MAAMK,IAAN,CAAWrB,uBAAX,EACH,CACD,GAAI,CAACkB,EAAEC,SAAF,CAAYH,KAAZ,CAAmB,CAAElB,WAAYD,sBAAsBC,UAApC,CAAnB,CAAL,CAA2E,CACvEiB,SAASK,iBAAT,CAA2B,kCAA3B,CAA+DvB,qBAA/D,EACAmB,MAAMK,IAAN,CAAWxB,qBAAX,EACH,CAEDc,KAAKW,MAAL,CAAY,cAAZ,EAA4BC,IAA5B,CACI5B,aAAa,CACTqB,MAAOE,EAAEM,KAAF,CAAQR,KAAR,EACFS,GADE,CACE,SAASC,IAAT,CAAe,CAChBA,KAAKC,WAAL,CAAmBC,KAAK,oBAAsBF,KAAK5B,UAA3B,CAAwC,cAA7C,CAAnB,CACA,MAAO4B,KAAP,CACH,CAJE,EAKFG,MALE,CAKK,aALL,EAMFC,KANE,EADE,CAAb,CADJ,EAUEC,IAVF,CAUO,GAVP,EAUYC,EAVZ,CAUe,CAVf,EAUkBC,OAVlB,CAU0B,OAV1B,EAWH,CAtBD,EAuBH,CAhCD,EAkCA,KAAKpB,YAAL,CAAoB,SAASqB,KAAT,CAAgB,CAChC,GAAIC,eAAgBC,EAAEF,MAAMG,MAAR,EAAgBC,OAAhB,CAAwB,IAAxB,EACXC,QADW,CACF,SADE,EACSC,WADT,CACqB,QADrB,EAC+BC,GAD/B,GAEXC,QAFW,CAEF,QAFE,EAGXC,IAHW,CAGN,eAHM,CAApB,CAIIC,UAAY,KAAKtB,MAAL,CAAY,cAAZ,EAA4BuB,qBAA5B,EAJhB,CAMA,GAAI,KAAKpC,SAAT,CAAoB,CAChB,KAAKA,SAAL,CAAeC,QAAf,GACH,CACD,KAAKD,SAAL,CAAiBb,WACZkD,IADY,CACPF,SADO,EAEZG,IAFY,CAEPZ,aAFO,CAAjB,CAGA,KAAK1B,SAAL,CAAeuC,MAAf,GACH,CAdD,CAgBH,CACJ,CAxFD","file":"userAccount.js","sourcesContent":["define([\n    'flight/lib/component',\n    './pageList.hbs',\n    'util/component/attacher'\n], function(\n    defineComponent,\n    listTemplate,\n    Attacher) {\n    'use strict';\n\n    const ACCESS_EXTENSION_PAGE = {\n        identifier: 'access',\n        pageComponentPath: 'workspaces/userAccount/bundled/access/Access'\n    };\n\n    const SETTINGS_EXTENSION_PAGE = {\n        identifier: 'settings',\n        pageComponentPath: 'workspaces/userAccount/bundled/settings/Settings'\n    };\n\n    return defineComponent(UserAccount);\n\n    function UserAccount() {\n\n        this.defaultAttrs({\n            listSelector: '.modal-body > .nav',\n            listItemSelector: '.modal-body > .nav li a',\n            pageSelector: '.modal-body > .page'\n        });\n\n        this.after('teardown', function() {\n            this.$node.remove();\n            if (this._attacher) {\n                this._attacher.teardown();\n            }\n        });\n\n        this.after('initialize', function() {\n            var self = this;\n\n            this.on('hidden', this.teardown);\n\n            this.on('click', {\n                listItemSelector: this.onChangePage\n            });\n\n            require(['configuration/plugins/registry'], function(registry) {\n                var pages = registry.extensionsForPoint('org.openlumify.user.account.page');\n                if (!_.findWhere(pages, { identifier: SETTINGS_EXTENSION_PAGE.identifier })) {\n                    registry.registerExtension('org.openlumify.user.account.page', SETTINGS_EXTENSION_PAGE);\n                    pages.push(SETTINGS_EXTENSION_PAGE);\n                }\n                if (!_.findWhere(pages, { identifier: ACCESS_EXTENSION_PAGE.identifier })) {\n                    registry.registerExtension('org.openlumify.user.account.page', ACCESS_EXTENSION_PAGE);\n                    pages.push(ACCESS_EXTENSION_PAGE);\n                }\n\n                self.select('listSelector').html(\n                    listTemplate({\n                        pages: _.chain(pages)\n                            .map(function(page) {\n                                page.displayName = i18n('useraccount.page.' + page.identifier + '.displayName');\n                                return page;\n                            })\n                            .sortBy('displayName')\n                            .value()\n                    })\n                ).find('a').eq(0).trigger('click');\n            });\n        });\n\n        this.onChangePage = function(event) {\n            var componentPath = $(event.target).closest('li')\n                    .siblings('.active').removeClass('active').end()\n                    .addClass('active')\n                    .data('componentPath'),\n                container = this.select('pageSelector').teardownAllComponents();\n\n            if (this._attacher) {\n                this._attacher.teardown();\n            }\n            this._attacher = Attacher()\n                .node(container)\n                .path(componentPath);\n            this._attacher.attach();\n        };\n\n    }\n});\n"]}