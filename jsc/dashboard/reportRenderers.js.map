{"version":3,"sources":["../../js/dashboard/reportRenderers.js"],"names":["define","registry","ontology","registerExtension","identifier","supportsResponse","data","type","label","i18n","componentPath","_","size","root","isFunction","displayName","every","buckets","item","value","properties","byTitle","field","contains","intents","configurationPath"],"mappings":"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","file":"reportRenderers.js","sourcesContent":["define([\n    'configuration/plugins/registry',\n    'util/requirejs/promise!util/service/ontologyPromise'\n], function(registry, ontology) {\n    'use strict';\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-element-list',\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_ELEMENTS';\n        },\n        label: i18n('dashboard.renderers.elementlist'),\n        componentPath: 'dashboard/reportRenderers/element-list'\n    });\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-bar-vertical',\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_AGGREGATION' &&\n                _.size(data.root) === 1 &&\n                _.isFunction(data.root[0].displayName) &&\n                _.every(data.root[0].buckets, function(item) {\n                    return item.value && ('count' in item.value || 'nestedResults' in item.value) && !('cell' in item.value)\n                });\n        },\n        label: i18n('dashboard.renderers.bar.vertical'),\n        componentPath: 'dashboard/reportRenderers/bar'\n    });\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-bar-horizontal',\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_AGGREGATION' &&\n                _.size(data.root) === 1 &&\n                data.root[0].type !== 'histogram' &&\n                _.isFunction(data.root[0].displayName) &&\n                _.every(data.root[0].buckets, function(item) {\n                    return item.value && ('count' in item.value || 'nestedResults' in item.value) && !('cell' in item.value)\n                });\n        },\n        label: i18n('dashboard.renderers.bar.horizontal'),\n        componentPath: 'dashboard/reportRenderers/bar'\n    });\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-pie',\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_AGGREGATION' &&\n                _.size(data.root) === 1 &&\n                _.isFunction(data.root[0].displayName) &&\n                _.every(data.root[0].buckets, function(item) {\n                    return item.value && 'count' in item.value && !('nested' in item.value) && !('cell' in item.value)\n                });\n        },\n        label: i18n('dashboard.renderers.pie'),\n        componentPath: 'dashboard/reportRenderers/pie'\n    });\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-choropleth',\n        label: i18n('dashboard.renderers.choropleth'),\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_AGGREGATION' &&\n                _.size(data.root) === 1 &&\n                _.isFunction(data.root[0].displayName) &&\n                ontology.properties.byTitle[data.root[0].field] &&\n                _.contains(\n                    ontology.properties.byTitle[data.root[0].field].intents || [],\n                    'zipCode'\n                ) &&\n                _.every(data.root[0].buckets, function(item) {\n                    return item.value && 'count' in item.value && !('nested' in item.value) && !('cell' in item.value)\n                });\n        },\n        componentPath: 'dashboard/reportRenderers/choropleth'\n    });\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-text-overview',\n        configurationPath: 'dashboard/configs/report/text-overview-config',\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_AGGREGATION' &&\n                _.size(data.root) === 1 &&\n                _.isFunction(data.root[0].displayName) &&\n                _.every(data.root[0].buckets, function(item) {\n                    return item.value && 'count' in item.value && !('nested' in item.value) && !('cell' in item.value)\n                });\n        },\n        label: i18n('dashboard.renderers.textoverview'),\n        componentPath: 'dashboard/reportRenderers/text-overview'\n    });\n\n    registry.registerExtension('org.openlumify.dashboard.reportrenderer', {\n        identifier: 'org-openlumify-geohash',\n        supportsResponse: function(data) {\n            return data.type === 'TYPE_AGGREGATION' &&\n                _.size(data.root) === 1 &&\n                _.isFunction(data.root[0].displayName) &&\n                _.every(data.root[0].buckets, function(item) {\n                    return item.value && ('cell' in item.value && 'count' in item.value && 'point' in item.value);\n                });\n        },\n        label: i18n('dashboard.renderers.heatmap'),\n        componentPath: 'dashboard/reportRenderers/geohash'\n    });\n});\n"]}