{"version":3,"sources":["../js/app.js"],"names":["define","defineComponent","appTemplate","Menubar","Dashboard","Search","Workspaces","WorkspaceOverlay","WorkspaceTimeline","ProductListContainer","Admin","Activity","Detail","Help","React","ReactDom","redux","registry","attacher","MouseOverlay","withFileDrop","VertexMenu","Privileges","withDataRequest","App","DATA_MENUBAR_NAME","onError","evt","err","console","error","message","defaultAttrs","menubarSelector","dashboardSelector","searchSelector","workspacesSelector","productSelector","workspaceOverlaySelector","extensionPanesSelector","extensionSubPanesSelector","adminSelector","helpDialogSelector","activitySelector","detailPaneSelector","before","_","invoke","$node","empty","after","self","triggerPaneResized","debounce","bind","documentExtensionPoint","e","isFunction","fixMultipleBootstrapModals","on","onRegisterForPositionChanges","document","toggleDisplay","onObjectsSelected","onInternalPaneResize","onResizeStart","onResizeStop","onWindowResize","onMapAction","onChangeView","toggleSearchPane","toggleActivityPane","onEscapeKey","logout","onShowVertexContextMenu","onShowEdgeContextMenu","onShowCollapsedItemContextMenu","onGenericPaste","onToggleTimeline","once","onPrivilegesReady","onOpenFullscreen","trigger","scope","map","i18n","shortcuts","escape","fire","desc","$","trapAnchorClicks","content","menubarPane","filter","dashboardPane","data","searchPane","workspacesPane","productsPane","adminPane","activityPane","detailPane","helpDialog","onResizeCreateLoad","onResizeStartHandleMaxWidths","onResizeStopSave","resizable","onPaneResize","attachTo","find","attachReactComponentWithStore","html","body","toggleClass","attr","animateFromLogin","dataRequest","done","properties","name","defaultKey","urlSpecifiedTools","openMenubarTools","each","options","TRANSITION_END","oe","originalEvent","propertyName","target","is","off","applicationLoaded","defer","addClass","openAdminTool","canADMIN","handler","require","Notifications","emptyMessage","showInformational","Comp","props","div","openlumifyData","storePromise","then","store","component","createElement","provider","Provider","node","get","render","event","anchorTo","page","reposition","position","x","window","width","y","height","F","Promise","_F","vertex","getVertexAndEdgeIdsFromDataEventOrCurrentSelection","async","vertexIds","edgeIds","url","vertexUrl","v","currentWorkspaceId","open","$button","hasClass","teardownComponent","removeClass","isString","trim","length","handleDropped","handleItemsDropped","items","handleFilesDropped","files","type","thing","preventDefault","config","pageX","pageY","lastMousePositionX","lastMousePositionY","string","stringType","stringMimeType","dataByMimeType","chain","item","dataTransfer","getData","object","value","$productContainer","FileImport","VertexMenuComponent","contextMenu","lookupComponent","teardown","collapseAllPanes","$target","element","teardownAll","collapsedItemId","vertexId","view","pane","select","log","logoutExtensions","extensionsForPoint","errorMessage","executeHandlers","anyReturnedFalse","any","showLoginComponent","remove","Login","append","location","reload","byPassLogout","setErrorMessage","catch","SLIDE_OUT","POPOVER","nameFull","deferred","Deferred","menubarExtensions","extension","findWhere","identifier","action","resolve","appendTo","graphPadding","currentGraphPadding","path","componentPath","params","attach","isVisible","isSlideOut","indexOf","isPopover","one","visible","minWidth","vertices","edges","makeVisible","style","openingPane","undefined","PANE_BORDER_WIDTH","searchWidth","outerWidth","searchResultsWidth","workspacesWidth","workspaceFormWidth","productWidth","extensionPaneWidth","extensionSubPaneWidth","adminWidth","adminFormWidth","detailWidth","padding","l","r","t","b","openingPaneWidth","otherVisiblePanes","availableWidth","availablePaneWidth","pixelsNeeded","sortBy","closest","tap","panes","push","$pane","paneWidth","newWidth","Math","max","pixelsCompressing","updateStorePadding","_updateStorePadding","all","spread","actions","dispatch","setPadding","top","right","bottom","left","withoutPane","openPanesOut","windowWidth","menubarWidth","workspaceOverlayWidth","not","toArray","widthOfOpenPanes","reduce","el","$el","maxWidthAllowed","splice","apply","concat","user","currentUser","sizePaneName","widthPaneName","heightPaneName","nameToPref","prefName","userPrefs","uiPreferences","size","split","parseInt","warn","maxWidth","minHeight","maxHeight","ui","thisPane","helper","keyPrefix","key","isUndefined","String","collapse","forEach","isDetail","syncToRemote","wrapper","handles","callback","createCallback","resize","create","zIndex","modal","css","setTimeout"],"mappings":"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","file":"app.js","sourcesContent":["\ndefine([\n    'flight/lib/component',\n    'app.hbs',\n    'menubar/menubar',\n    'dashboard/dashboard',\n    'search/search',\n    'workspaces/workspaces',\n    'workspaces/overlay',\n    'workspaces/timeline',\n    'product/ProductListContainer',\n    'admin/admin',\n    'activity/activity',\n    'detail/detail',\n    'help/help',\n    'react',\n    'react-dom',\n    'react-redux',\n    'configuration/plugins/registry',\n    'util/component/attacher',\n    'util/mouseOverlay',\n    'util/withFileDrop',\n    'util/element/menu',\n    'util/privileges',\n    'util/withDataRequest'\n], function(\n    defineComponent,\n    appTemplate,\n    Menubar,\n    Dashboard,\n    Search,\n    Workspaces,\n    WorkspaceOverlay,\n    WorkspaceTimeline,\n    ProductListContainer,\n    Admin,\n    Activity,\n    Detail,\n    Help,\n    React,\n    ReactDom,\n    redux,\n    registry,\n    attacher,\n    MouseOverlay,\n    withFileDrop,\n    VertexMenu,\n    Privileges,\n    withDataRequest) {\n    'use strict';\n\n    return defineComponent(App, withFileDrop, withDataRequest);\n\n    function App() {\n        var DATA_MENUBAR_NAME = 'menubar-name';\n\n        this.onError = function(evt, err) {\n            console.error('Error: ' + err.message); // TODO better error handling\n        };\n\n        this.defaultAttrs({\n            menubarSelector: '.menubar-pane',\n            dashboardSelector: '.dashboard-pane',\n            searchSelector: '.search-pane',\n            workspacesSelector: '.workspaces-pane',\n            productSelector: '.products-pane',\n            workspaceOverlaySelector: '.workspace-overlay',\n            extensionPanesSelector: '.plugin-pane',\n            extensionSubPanesSelector: '.plugin-subpane',\n            adminSelector: '.admin-pane',\n            helpDialogSelector: '.help-dialog',\n            activitySelector: '.activity-pane',\n            detailPaneSelector: '.detail-pane'\n        });\n\n        this.before('teardown', function() {\n\n            _.invoke([\n                WorkspaceOverlay,\n                MouseOverlay,\n                Menubar,\n                Dashboard,\n                Search,\n                Workspaces,\n                Admin,\n                Detail,\n                Help\n            ], 'teardownAll');\n\n            this.$node.empty();\n        });\n\n        this.after('initialize', function() {\n            var self = this;\n\n            this.triggerPaneResized = _.debounce(this.triggerPaneResized.bind(this), 10);\n\n            /**\n             * Register a handler that is notified of logout. Happens before\n             * the request to logout.\n             *\n             * If the handler returns `false` all other logout handlers are skipped and the default logout process is cancelled.\n             *\n             * @param {function} config The function to call during logout.\n             * @returns {boolean} To cancel logout return `false`\n             * @example\n             * registry.registerExtension('org.openlumify.logout', function() {\n             *     window.location.href = '/logout';\n             *     return false;\n             * });\n             */\n            registry.documentExtensionPoint('org.openlumify.logout',\n                'Override logout',\n                function(e) {\n                    return _.isFunction(e);\n                },\n                'http://docs.openlumify.org/extension-points/front-end/logout'\n            );\n            /**\n             * Add menu items to the context menu of vertices.\n             *\n             * Pass the string `DIVIDER` to place a divider in the menu\n             *\n             * @param {string} label The menu text to display\n             * @param {string} event The event to trigger on click, not\n             * required if `submenu` is provided\n             * @param {string} [shortcut] string of shortcut to show in menu.\n             * Doesn't actually listen for shortcut, just places the text in\n             * the label. For example, `alt+p`\n             * @param {object} [args] Additional arguments passed to handler\n             * @param {string} [cls] CSS classname added to item\n             * @param {function} [shouldDisable] Given the `selection`,\n             * `vertexId`, `DomElement`, and `vertex` as parameters\n             * @param {array.<object>} [submenu] The submenu to open on hover\n             * @param {function} [canHandle] Should the item be place given\n             * `currentSelection` and `vertex` parameters.\n             * @param {number} [selection] Automatically enable or disable based on the targeted number of vertices\n             * @param {object} [options]\n             * @param {function} [options.insertIntoMenuItems] function to place the item in a specific location/order, given `item` and `items`.\n             *\n             * Syntax similar to {@link org.openlumify.detail.toolbar~insertIntoMenuItems}\n             */\n            registry.documentExtensionPoint('org.openlumify.vertex.menu',\n                'Add vertex context menu items',\n                function(e) {\n                    return e === 'DIVIDER' || (\n                        ('event' in e || 'submenu' in e) && ('label' in e)\n                    );\n                },\n                'http://docs.openlumify.org/extension-points/front-end/elementMenu'\n            );\n            /**\n             * Add menu items to the context menu of edges.\n             *\n             * Pass the string `DIVIDER` to place a divider in the menu\n             *\n             * @param {string} label The menu text to display\n             * @param {string} event The event to trigger on click, not\n             * required if `submenu` is provided\n             * @param {string} [shortcut] string of shortcut to show in menu.\n             * Doesn't actually listen for shortcut, just places the text in\n             * the label. For example, `alt+p`\n             * @param {object} [args] Additional arguments passed to handler\n             * @param {string} [cls] CSS classname added to item\n             * @param {function} [shouldDisable] Given the `selection`,\n             * `edgeId`, `DomElement`, and `edge` as parameters\n             * @param {array.<object>} [submenu] The submenu to open on hover\n             * @param {function} [canHandle] Should the item be place given\n             * `currentSelection` and `edge` parameters.\n             * @param {number} [selection] Automatically enable or disable based on the targeted number of edges\n             * @param {object} [options]\n             * @param {function} [options.insertIntoMenuItems] function to place the item in a specific location/order, given `item` and `items`.\n             *\n             * Syntax similar to {@link org.openlumify.detail.toolbar~insertIntoMenuItems}\n             */\n            registry.documentExtensionPoint('org.openlumify.edge.menu',\n                'Add edge context menu items',\n                function(e) {\n                    return e === 'DIVIDER' || (\n                            ('event' in e || 'submenu' in e) && ('label' in e)\n                        );\n                },\n                'http://docs.openlumify.org/extension-points/front-end/elementMenu'\n            );\n\n            fixMultipleBootstrapModals();\n            this.on('registerForPositionChanges', this.onRegisterForPositionChanges);\n\n            this.on(document, 'error', this.onError);\n            this.on(document, 'menubarToggleDisplay', this.toggleDisplay);\n            this.on(document, 'objectsSelected', this.onObjectsSelected);\n            this.on(document, 'paneResized', this.onInternalPaneResize);\n            this.on(document, 'resizestart', this.onResizeStart);\n            this.on(document, 'resizestop', this.onResizeStop);\n            this.on(document, 'windowResize', this.onWindowResize);\n            this.on(document, 'mapCenter', this.onMapAction);\n            this.on(document, 'changeView', this.onChangeView);\n            this.on(document, 'toggleSearchPane', this.toggleSearchPane);\n            this.on(document, 'toggleActivityPane', this.toggleActivityPane);\n            this.on(document, 'escape', this.onEscapeKey);\n            this.on(document, 'logout', this.logout);\n            this.on(document, 'showVertexContextMenu', this.onShowVertexContextMenu);\n            this.on(document, 'showEdgeContextMenu', this.onShowEdgeContextMenu);\n            this.on(document, 'showCollapsedItemContextMenu', this.onShowCollapsedItemContextMenu);\n            this.on(document, 'genericPaste', this.onGenericPaste);\n            this.on(document, 'toggleTimeline', this.onToggleTimeline);\n            this.on(document, 'privilegesReady', _.once(this.onPrivilegesReady.bind(this)));\n            this.on(document, 'openFullscreen', this.onOpenFullscreen);\n\n            this.trigger(document, 'registerKeyboardShortcuts', {\n                scope: ['graph.help.scope', 'map.help.scope'].map(i18n),\n                shortcuts: {\n                    escape: { fire: 'escape', desc: i18n('openlumify.help.escape') }\n                }\n            });\n\n            this.trigger(document, 'registerKeyboardShortcuts', {\n                scope: i18n('search.help.scope'),\n                shortcuts: {\n                    '/': { fire: 'toggleSearchPane', desc: i18n('search.help.toggle') }\n                }\n            });\n\n            this.trigger(document, 'registerKeyboardShortcuts', {\n                scope: i18n('openlumify.help.scope'),\n                shortcuts: {\n                    'alt-l': { fire: 'logout', desc: i18n('openlumify.help.logout') }\n                }\n            });\n\n            this.trigger(document, 'registerKeyboardShortcuts', {\n                scope: i18n('activity.help.scope'),\n                shortcuts: {\n                    'alt-a': { fire: 'toggleActivityPane', desc: i18n('activity.help.toggle') }\n                }\n            });\n\n            // Prevent the fragment identifier from changing after an anchor\n            // with href=\"#\" not stopPropagation'ed\n            $(document).on('click', 'a', this.trapAnchorClicks.bind(this));\n\n            var content = $(appTemplate({})),\n                menubarPane = content.filter('.menubar-pane'),\n                dashboardPane = content.filter('.dashboard-pane').data(DATA_MENUBAR_NAME, 'dashboard'),\n                searchPane = content.filter('.search-pane').data(DATA_MENUBAR_NAME, 'search'),\n                workspacesPane = content.filter('.workspaces-pane').data(DATA_MENUBAR_NAME, 'workspaces'),\n                productsPane = content.filter('.products-pane').data(DATA_MENUBAR_NAME, 'products'),\n                adminPane = content.filter('.admin-pane').data(DATA_MENUBAR_NAME, 'admin'),\n                activityPane = content.filter('.activity-pane').data(DATA_MENUBAR_NAME, 'activity'),\n                detailPane = content.filter('.detail-pane').data(DATA_MENUBAR_NAME, 'detail'),\n                helpDialog = content.filter('.help-dialog');\n\n            this.on('resizecreate', this.onResizeCreateLoad);\n            this.on('resizestart', this.onResizeStartHandleMaxWidths);\n            this.on('resizestop', this.onResizeStopSave);\n\n            // Configure splitpane resizing\n            resizable(searchPane, 'e', 190, 300, this.onPaneResize.bind(this), this.onResizeCreateLoad.bind(this));\n            resizable(workspacesPane, 'e', 190, 250, this.onPaneResize.bind(this), this.onResizeCreateLoad.bind(this));\n            resizable(productsPane, 'e', 150, 250, this.onPaneResize.bind(this), this.onResizeCreateLoad.bind(this));\n            resizable(adminPane, 'e', 190, 250, this.onPaneResize.bind(this), this.onResizeCreateLoad.bind(this));\n            resizable(detailPane, 'w', 225, 500, this.onPaneResize.bind(this), this.onResizeCreateLoad.bind(this));\n\n            WorkspaceOverlay.attachTo(content.filter('.workspace-overlay'));\n            MouseOverlay.attachTo(document);\n            Menubar.attachTo(menubarPane.find('.content'));\n            Dashboard.attachTo(dashboardPane);\n            Search.attachTo(searchPane.find('.content'));\n            Workspaces.attachTo(workspacesPane.find('.content'));\n            Admin.attachTo(adminPane.find('.content'));\n            Activity.attachTo(activityPane.find('.content'));\n            Detail.attachTo(detailPane.find('.content'));\n            Help.attachTo(helpDialog);\n\n            this.attachReactComponentWithStore(ProductListContainer, {}, productsPane.find('.content'));\n\n            this.$node.html(content);\n\n            $(document.body).toggleClass('animatelogin', !!this.attr.animateFromLogin);\n\n            this.triggerPaneResized();\n            this.dataRequest('config', 'properties')\n                .done(function(properties) {\n                    var name = dashboardPane.data(DATA_MENUBAR_NAME),\n                        defaultKey = 'menubar.default.selected',\n                        urlSpecifiedTools = self.attr.openMenubarTools;\n\n                    if (urlSpecifiedTools) {\n                        _.each(urlSpecifiedTools, function(options = {}, name) {\n                            self.trigger(document, 'menubarToggleDisplay', { name, options });\n                        })\n                    }\n                    if (properties[defaultKey]) {\n                        name = properties[defaultKey];\n                    }\n                    if (!urlSpecifiedTools) {\n                        self.trigger(document, 'menubarToggleDisplay', { name: name });\n                    }\n\n                    if (self.attr.animateFromLogin) {\n                        $(document.body).on(TRANSITION_END, function(e) {\n                            var oe = e.originalEvent;\n                            if (oe.propertyName === 'left' && $(oe.target).is('.menubar-pane')) {\n                                $(document.body).off(TRANSITION_END);\n                                self.applicationLoaded();\n                            }\n                        });\n                        _.defer(function() {\n                            $(document.body).addClass('animateloginstart');\n                        })\n                    } else {\n                        self.applicationLoaded();\n                    }\n                })\n        });\n\n        this.onPrivilegesReady = function() {\n            if (this.attr.openAdminTool && Privileges.canADMIN) {\n                this.trigger('menubarToggleDisplay', { name: 'admin' });\n                this.trigger('showAdminPlugin', this.attr.openAdminTool);\n            }\n        };\n\n        this.applicationLoaded = function() {\n            var self = this;\n\n            this.on(document, 'workspaceLoaded', function handler() {\n                self.off(document, 'workspaceLoaded', handler);\n                require(['notifications/notifications'], function(Notifications) {\n                    Notifications.attachTo(self.$node, {\n                        emptyMessage: false,\n                        showInformational: false\n                    });\n                });\n            });\n            this.trigger('loadCurrentWorkspace');\n        };\n\n        this.attachReactComponentWithStore = function(Comp, props, div) {\n            return openlumifyData.storePromise.then(function(store) {\n                var component = React.createElement(Comp, props || {}),\n                    provider = React.createElement(redux.Provider, { store }, component),\n                    node = _.isFunction(div.get) ? div.get(0) : div;\n\n                ReactDom.render(provider, node);\n            })\n        };\n\n        this.onRegisterForPositionChanges = function(event, data) {\n            var self = this;\n\n            if (data && data.anchorTo && data.anchorTo.page) {\n                reposition(data.anchorTo.page);\n                this.on(document, 'windowResize', function() {\n                    reposition(data.anchorTo.page);\n                });\n            }\n\n            function reposition(position) {\n                if (position === 'center') {\n                    position = {\n                        x: $(window).width() / 2 + $('.menubar-pane').width() / 2,\n                        y: $(window).height() / 2\n                    };\n                }\n                self.trigger(event.target, 'positionChanged', {\n                    position: position\n                });\n            }\n        };\n\n        this.onOpenFullscreen = function(event, data) {\n            if (!data) return;\n\n            let F;\n            Promise.require('util/vertex/formatters')\n                .then(function(_F) {\n                    F = _F;\n                    return F.vertex.getVertexAndEdgeIdsFromDataEventOrCurrentSelection(data, { async: true });\n                })\n                .then(function({ vertexIds, edgeIds }) {\n                    var url = F.vertexUrl.url(\n                        [\n                            ...vertexIds.map(v => `v${v}`),\n                            ...edgeIds.map(e => `e${e}`)\n                        ],\n                        openlumifyData.currentWorkspaceId\n                    );\n                    window.open(url);\n                })\n        };\n\n        this.onToggleTimeline = function(event) {\n            var $button = $('.toggle-timeline');\n            if ($button.is(':visible')) {\n                WorkspaceTimeline.attachTo(this.$node.find('.workspace-timeline'));\n                this.$node.toggleClass('workspace-timeline-visible');\n                $button.toggleClass('expanded');\n                if (!this.$node.hasClass('workspace-timeline-visible')) {\n                    this.$node.find('.workspace-timeline').teardownComponent(WorkspaceTimeline);\n                }\n            } else {\n                this.$node.removeClass('workspace-timeline-visible');\n                $button.removeClass('expanded');\n            }\n        };\n\n        this.onGenericPaste = function(event, data) {\n            if (data && _.isString(data.data) && $.trim(data.data).length) {\n                this.handleDropped('string', data.data, {\n                    target: this.node\n                });\n            }\n        };\n\n        this.handleItemsDropped = function(items, event) {\n            this.handleDropped('items', items, event);\n        };\n\n        this.handleFilesDropped = function(files, event) {\n            this.handleDropped('files', files, event);\n        };\n\n        this.handleDropped = function(type, thing, event) {\n            event.preventDefault();\n            var self = this,\n                config = {\n                    anchorTo: {\n                        page: event.pageX && event.pageY ? {\n                            x: event.pageX,\n                            y: event.pageY\n                        } : {\n                            x: window.lastMousePositionX,\n                            y: window.lastMousePositionY\n                        }\n                    }\n                };\n\n            if (type === 'files') {\n                config.files = thing;\n            } else if (type === 'string') {\n                config.string = thing;\n                config.stringType = 'Pasted Content';\n                config.stringMimeType = 'text/plain';\n            } else {\n                var dataByMimeType = _.chain(thing)\n                    .map(function(item) {\n                        return [item.type, event.dataTransfer.getData(item.type)];\n                    })\n                    .object()\n                    .value();\n\n                if ('text/html' in dataByMimeType) {\n                    config.string = dataByMimeType['text/html'];\n                    config.stringType = 'Rich Content';\n                    config.stringMimeType = 'text/html';\n                } else if ('text/plain' in dataByMimeType) {\n                    config.string = dataByMimeType['text/plain'];\n                    config.stringType = 'Plain Text';\n                    config.stringMimeType = 'text/plain';\n                } else {\n                    return;\n                }\n            }\n\n            // If product is open use the containing node for custom product behavior\n            var $productContainer = $('.products-full-pane.visible');\n            require(['util/popovers/fileImport/fileImport'], function(FileImport) {\n                FileImport.attachTo($productContainer.length ? $productContainer : self.node, config);\n            });\n        };\n\n        this.toggleActivityPane = function() {\n            this.trigger(document, 'menubarToggleDisplay', { name: 'activity' });\n        };\n\n        this.toggleSearchPane = function() {\n            this.trigger(document, 'menubarToggleDisplay', { name: 'search' });\n        };\n\n        this.onEscapeKey = function() {\n            var self = this;\n\n            // Close any context menus first\n            require(['util/element/menu'], function(VertexMenuComponent) {\n                var contextMenu = $(document.body).lookupComponent(VertexMenuComponent);\n                if (contextMenu) {\n                    contextMenu.teardown();\n                } else {\n                    self.collapseAllPanes();\n                    self.trigger('selectObjects');\n                }\n            });\n        };\n\n        this.trapAnchorClicks = function(e) {\n            var $target = $(e.target);\n\n            if ($target.is('a') && $target.attr('href') === '#') {\n                e.preventDefault();\n            }\n        };\n\n        this.onShowCollapsedItemContextMenu = this.onShowEdgeContextMenu = this.onShowVertexContextMenu = function(event, data) {\n            data.element = event.target;\n\n            VertexMenu.teardownAll();\n            if (data && (data.collapsedItemId || data.vertexId || data.edgeIds)) {\n                VertexMenu.attachTo(document.body, data);\n            }\n        };\n\n        this.onMapAction = function(event, data) {\n            this.trigger(document, 'changeView', { view: 'map', data: data });\n        };\n\n        this.onChangeView = function(event, data) {\n            var view = data && data.view,\n                pane = view && this.select(view + 'Selector');\n\n            if (pane && pane.hasClass('visible')) {\n                return;\n            } else if (pane) {\n                this.trigger(document, 'menubarToggleDisplay', { name: pane.data(DATA_MENUBAR_NAME), data: data.data });\n            } else {\n                console.log('View ' + data.view + \" isn't supported\");\n            }\n        };\n\n        this.logout = function(event, data) {\n            var self = this,\n                logoutExtensions = registry.extensionsForPoint('org.openlumify.logout'),\n                errorMessage = data && data.message,\n                executeHandlers = function() {\n                    if (!logoutExtensions.length) {\n                        return true;\n                    }\n\n                    var anyReturnedFalse = _.any(logoutExtensions, function(handler) {\n                        return handler() === false;\n                    });\n\n                    if (anyReturnedFalse) {\n                        return false;\n                    }\n\n                    return true;\n                },\n                showLoginComponent = function(errorMessage) {\n                    self.trigger('didLogout');\n\n                    $('.dialog-popover, .modal, .modal-backdrop, .popover').remove();\n\n                    require(['login'], function(Login) {\n                        $(document.body)\n                            .removeClass('animatelogin animateloginstart')\n                            .append('<div id=\"login\"/>')\n                            .on('loginSuccess', function() {\n                                window.location.reload();\n                            })\n                        Login.teardownAll();\n                        Login.attachTo('#login', { errorMessage });\n                        _.defer(function() {\n                            self.teardown();\n                        });\n                    });\n                };\n\n            if (data && data.byPassLogout) {\n                this.trigger('willLogout');\n                showLoginComponent(errorMessage);\n            } else if (executeHandlers()) {\n                this.trigger('willLogout');\n                this.dataRequest('user', 'logout')\n                    .then(() => {\n                        require(['login'], Login => {\n                            Login.setErrorMessage(errorMessage);\n                            window.location.reload();\n                        })\n                    })\n                    .catch(function() {\n                        showLoginComponent(i18n('openlumify.server.not_found'));\n                    });\n            }\n        };\n\n        this.toggleDisplay = function(e, data) {\n            var self = this,\n                SLIDE_OUT = 'search workspaces products admin',\n                POPOVER = 'activity',\n                name = data && (data.nameFull || data.name),\n                pane = this.select(name + 'Selector'),\n                deferred = $.Deferred(),\n                menubarExtensions = registry.extensionsForPoint('org.openlumify.menubar'),\n                extension;\n\n            if (name) {\n                extension = _.findWhere(menubarExtensions, { identifier: name });\n                if (extension) {\n                    data = extension;\n                    name = data.identifier;\n                }\n            }\n\n            if (data.action) {\n                pane = this.$node.find('.' + name + '-pane');\n\n                if (data.action.type === 'pane') {\n                    SLIDE_OUT += (' ' + name);\n                }\n\n                if (pane.length) {\n                    deferred.resolve();\n                } else {\n                    pane = $('<div>')\n                        .data('widthPreference', name)\n                        .addClass((data.action.type === 'full' ? 'fullscreen' : 'plugin') +\n                                  '-pane ' +\n                                  name + '-pane')\n                        .appendTo(this.$node)\n                        .data(DATA_MENUBAR_NAME, name);\n\n                    if (data.action.type === 'pane') {\n                        $('<div class=\"content\">').appendTo(pane);\n                        resizable(pane.width(190), 'e', 190, 300,\n                                  this.onPaneResize.bind(this),\n                                  this.onResizeCreateLoad.bind(this));\n                    }\n\n                    var node = data.action.type === 'pane' ? pane.find('.content') : pane;\n                    var options = { graphPadding: self.currentGraphPadding };\n\n                    attacher()\n                        .node(node)\n                        .path(data.action.componentPath)\n                        .params(options)\n                        .attach()\n                        .then(function() {\n                            deferred.resolve();\n                        });\n                }\n            } else if (pane.length === 0) {\n                pane = this.$node.find('.' + name + '-pane');\n                deferred.resolve();\n            } else {\n                deferred.resolve();\n            }\n\n            deferred.done(function() {\n                var isVisible = pane.is('.visible');\n\n                if (name === 'logout') {\n                    return this.logout();\n                }\n\n                if (name === 'map' && !pane.hasClass('visible')) {\n                    this.trigger(document, 'mapShow', (data && data.data) || {});\n                }\n\n                var type = 'full';\n                var isSlideOut = SLIDE_OUT.indexOf(name) >= 0;\n                var isPopover = POPOVER.indexOf(name) >= 0;\n                if (isSlideOut || isPopover) {\n                    type = 'pane';\n                    pane.one(TRANSITION_END, function() {\n                        pane.off(TRANSITION_END);\n                        if (!isVisible) {\n                            self.trigger(name + 'PaneVisible');\n                        }\n                        self.triggerPaneResized(isVisible ? null : pane);\n                    });\n                } else this.triggerPaneResized();\n\n                // Can't toggleClass because if only one is visible we want to hide all\n                if (isVisible) {\n                    pane.removeClass('visible');\n                } else pane.addClass('visible');\n\n                this.trigger('didToggleDisplay', {\n                    name: name,\n                    type: type,\n                    visible: !isVisible\n                })\n            }.bind(this));\n        };\n\n        this.onObjectsSelected = function(e, data) {\n            var detailPane = this.select('detailPaneSelector'),\n                minWidth = 100,\n                vertices = data.vertices,\n                edges = data.edges,\n                makeVisible = vertices.length || edges.length;\n\n            if (makeVisible) {\n                if (detailPane.width() < minWidth) {\n                    detailPane[0].style.width = null;\n                }\n                detailPane.removeClass('collapsed').addClass('visible');\n            } else {\n                detailPane.removeClass('visible').addClass('collapsed');\n            }\n\n            this.triggerPaneResized(makeVisible ? detailPane : null);\n        };\n\n        this.onInternalPaneResize = function(event) {\n            var $target = event && $(event.target),\n                openingPane = $target && $target.length && $target.is('.ui-resizable') && $target || undefined;\n\n            this.triggerPaneResized(openingPane);\n        };\n\n        this.onPaneResize = function() {\n            this.triggerPaneResized();\n        };\n\n        this.triggerPaneResized = function(openingPane) {\n            var PANE_BORDER_WIDTH = 1,\n                searchWidth = this.select('searchSelector')\n                    .filter('.visible:not(.collapsed)')\n                    .outerWidth(true) || 0,\n\n                searchResultsWidth = searchWidth > 0 ?\n                    (\n                        ($('.active .search-results:visible:not(.collapsed)').outerWidth(true) || 0) +\n                        ($('.advanced-search-type-results:visible:not(.collapsed)').outerWidth(true) || 0)\n                    ) : 0,\n\n                workspacesWidth = this.select('workspacesSelector')\n                    .filter('.visible:not(.collapsed)')\n                    .outerWidth(true) || 0,\n\n                workspaceFormWidth = workspacesWidth > 0 ?\n                    $('.workspace-form:visible:not(.collapsed)')\n                        .outerWidth(true) || 0 : 0,\n\n                productWidth = this.select('productSelector')\n                    .filter('.visible:not(.collapsed)')\n                    .outerWidth(true) || 0,\n\n                extensionPaneWidth = this.select('extensionPanesSelector')\n                    .filter('.visible:not(.collapsed)')\n                    .outerWidth(true) || 0,\n\n                extensionSubPaneWidth = extensionPaneWidth > 0 ?\n                    this.select('extensionSubPanesSelector')\n                        .filter(':visible:not(.collapsed)')\n                        .outerWidth(true) || 0 : 0,\n\n                adminWidth = this.select('adminSelector')\n                    .filter('.visible:not(.collapsed)')\n                    .outerWidth(true) || 0,\n\n                adminFormWidth = adminWidth > 0 ?\n                    $('.admin-form:visible:not(.collapsed)')\n                        .outerWidth(true) || 0 : 0,\n\n                detailWidth = this.select('detailPaneSelector')\n                    .filter('.visible:not(.collapsed)')\n                    .outerWidth(true) || 0,\n\n                padding = {\n                    l: searchWidth + searchResultsWidth +\n                       workspacesWidth + workspaceFormWidth +\n                       productWidth +\n                       adminWidth + adminFormWidth +\n                       extensionPaneWidth + extensionSubPaneWidth,\n                    r: detailWidth,\n                    t: 0,\n                    b: 0\n                };\n\n            if (padding.l) {\n                padding.l += PANE_BORDER_WIDTH;\n            }\n            if (padding.r) {\n                padding.r += PANE_BORDER_WIDTH;\n            }\n\n            if (openingPane) {\n                var openingPaneWidth = openingPane.width(),\n                    otherVisiblePanes = [],\n                    availableWidth = this.availablePaneWidth(openingPane, otherVisiblePanes),\n                    pixelsNeeded = openingPaneWidth - availableWidth;\n\n                if (pixelsNeeded > 0) {\n                    _.chain(otherVisiblePanes)\n\n                        // Sort otherVisiblePanes with first being not a parent of openingPane\n                        // So that the search results resizes detail first instead of search query\n                        .sortBy(function(pane) {\n                            return openingPane.closest(pane).length;\n                        })\n\n                        // We resize the opening pane if we have to\n                        .tap(function(panes) {\n                            panes.push(openingPane);\n                        })\n\n                        .each(function(pane) {\n                            // First resize otherVisiblePanes as much as needed (minWidth), then resize openingPane\n                            if (pixelsNeeded <= 0) {\n                                return;\n                            }\n\n                            var $pane = $(pane),\n                                paneWidth = $pane.width(),\n                                minWidth = $pane.resizable('option', 'minWidth'),\n                                newWidth = Math.max(minWidth, paneWidth - pixelsNeeded),\n                                pixelsCompressing = paneWidth - newWidth;\n\n                            pixelsNeeded -= pixelsCompressing;\n\n                            $pane.width(newWidth);\n                        });\n\n                    return this.triggerPaneResized();\n                }\n            }\n\n            this.currentGraphPadding = padding;\n            this.trigger(document, 'graphPaddingUpdated', { padding: padding });\n            this.updateStorePadding(padding);\n        };\n\n        this.updateStorePadding = function(padding) {\n            if (this._updateStorePadding) {\n                this._updateStorePadding(padding);\n            } else {\n                Promise.all([\n                    openlumifyData.storePromise,\n                    Promise.require('data/web-worker/store/panel/actions')\n                ]).spread((store, actions) => {\n                    this._updateStorePadding = _.debounce(function(padding) {\n                        store.dispatch(actions.setPadding({\n                            top: padding.t,\n                            right: padding.r,\n                            bottom: padding.b,\n                            left: padding.l\n                        }))\n                    }, 250);\n                })\n            }\n        };\n\n        this.availablePaneWidth = function(withoutPane, openPanesOut) {\n            var windowWidth = $(window).width(),\n                menubarWidth = $('.menubar-pane').width(),\n                workspaceOverlayWidth = $('.workspace-overlay').outerWidth(),\n                otherVisiblePanes = $('#app > .ui-resizable.visible, .ui-resizable.visible .ui-resizable:visible')\n                    .not('.ui-ignore-pane-width')\n                    .not(withoutPane).toArray(),\n                widthOfOpenPanes = _.reduce(\n                    otherVisiblePanes,\n                    function(width, el) {\n                        var $el = $(el);\n                        return width + $el.width();\n                    },\n                    0\n                ),\n                maxWidthAllowed = windowWidth - menubarWidth - widthOfOpenPanes - workspaceOverlayWidth;\n\n            // Add visible to out parameter\n            if (openPanesOut) {\n                openPanesOut.splice.apply(openPanesOut, [0, openPanesOut.length].concat(otherVisiblePanes));\n            }\n\n            return maxWidthAllowed;\n        };\n\n        this.onResizeCreateLoad = function(event) {\n            const user = openlumifyData.currentUser,\n                $pane = $(event.target),\n                sizePaneName = $pane.data('sizePreference'),\n                widthPaneName = !sizePaneName && $pane.data('widthPreference'),\n                heightPaneName = !sizePaneName && $pane.data('heightPreference'),\n                nameToPref = function(name) {\n                    return name && ('pane-' + name);\n                },\n                prefName = nameToPref(sizePaneName || widthPaneName || heightPaneName),\n                userPrefs = user.uiPreferences,\n                value = userPrefs && prefName in userPrefs && userPrefs[prefName];\n\n            let width;\n            let height;\n            if (sizePaneName && value) {\n                const size = value.split(',');\n                if (size.length === 2) {\n                    width = parseInt(size[0], 10);\n                    height = parseInt(size[1], 10);\n                }\n            } else if (widthPaneName && value) {\n                width = parseInt(value, 10);\n            } else if (heightPaneName && value) {\n                height = parseInt(value, 10);\n            } else if (!prefName && !$pane.is('.facebox')) {\n                console.warn(\n                    'No data-width-preference or data-size-preference ' +\n                    'attribute for resizable pane', $pane[0]\n                );\n            }\n\n            if (width) {\n                const minWidth = $pane.resizable('option', 'minWidth');\n                if (minWidth && width < minWidth) {\n                    width = minWidth;\n                }\n                const maxWidth = $pane.resizable('option', 'maxWidth');\n                if (maxWidth && width > maxWidth) {\n                    width = maxWidth;\n                }\n                $pane.width(width);\n            }\n\n            if (height) {\n                const minHeight = $pane.resizable('option', 'minHeight');\n                if (minHeight && height < minHeight) {\n                    height = minHeight;\n                }\n                const maxHeight = $pane.resizable('option', 'maxHeight');\n                if (maxHeight && height > maxHeight) {\n                    height = maxHeight;\n                }\n                $pane.height(height);\n            }\n        };\n\n        this.onResizeStartHandleMaxWidths = function(event, ui) {\n            var thisPane = ui.element,\n                maxWidthAllowed = this.availablePaneWidth(thisPane);\n\n            if (!thisPane.closest('.modal').length) {\n                thisPane.resizable('option', 'maxWidth', maxWidthAllowed);\n            }\n        };\n\n        this.onResizeStopSave = function(event, ui) {\n            var sizePaneName = ui.helper.data('sizePreference'),\n                widthPaneName = ui.helper.data('widthPreference'),\n                heightPaneName = ui.helper.data('heightPreference'),\n                keyPrefix = 'pane-',\n                key = keyPrefix,\n                value;\n\n            if (sizePaneName) {\n                key += sizePaneName;\n                value = ui.element.width() + ',' + ui.element.height();\n            } else if (widthPaneName) {\n                key += widthPaneName;\n                value = ui.element.width();\n            } else if (heightPaneName) {\n                key += heightPaneName;\n                value = ui.element.height();\n            }\n\n            if (key !== keyPrefix && !_.isUndefined(value)) {\n                openlumifyData.currentUser.uiPreferences[key] = String(value);\n                this.dataRequest('user', 'preference', key, value)\n            }\n        };\n\n        this.collapseAllPanes = function() {\n            this.collapse([\n                this.select('searchSelector'),\n                this.select('workspacesSelector'),\n                this.select('productSelector'),\n                this.select('adminSelector'),\n                this.select('detailPaneSelector'),\n                this.select('activitySelector'),\n                this.select('extensionPanesSelector')\n            ]);\n        };\n\n        this.collapse = function(panes) {\n            var self = this,\n                detailPane = this.select('detailPaneSelector');\n\n            panes.forEach(function(pane) {\n                if (pane.hasClass('visible')) {\n                    var name = pane.data(DATA_MENUBAR_NAME),\n                        isDetail = pane.is(detailPane);\n\n                    if (!name) {\n                        if (isDetail) {\n                            return detailPane.addClass('collapsed').removeClass('visible');\n                        }\n                        return console.warn('No ' + DATA_MENUBAR_NAME + ' attribute, unable to collapse');\n                    }\n\n                    self.trigger(document, 'menubarToggleDisplay', {\n                        name: name,\n                        syncToRemote: false\n                    });\n                }\n            });\n            this.triggerPaneResized();\n        };\n\n        this.onWindowResize = function() {\n            this.triggerPaneResized();\n        };\n\n        this.onResizeStart = function() {\n            var wrapper = $('.draggable-wrapper');\n\n            // Prevent map from swallowing mousemove events by adding\n            // this transparent full screen div\n            if (wrapper.length === 0) {\n                wrapper = $('<div class=\"draggable-wrapper\"/>').appendTo(document.body);\n            }\n        };\n\n        this.onResizeStop = function() {\n            $('.draggable-wrapper').remove();\n        };\n    }\n\n    function resizable(el, handles, minWidth, maxWidth, callback, createCallback) {\n        return el.resizable({\n            handles: handles,\n            minWidth: minWidth || 150,\n            maxWidth: maxWidth || 300,\n            resize: callback,\n            create: createCallback\n        });\n    }\n\n    function fixMultipleBootstrapModals() {\n        $(document).on('show.bs.modal', '.modal', function() {\n            var zIndex = 10 + _.max(\n                _.map($('.modal'), function(modal) {\n                    return parseInt($(modal).css('z-index'), 10);\n                })\n            );\n            $(this).css('z-index', zIndex);\n            setTimeout(function() {\n                $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');\n            }, 0);\n        });\n    }\n});\n"]}