{"version":3,"sources":["../../js/product/ProductList.jsx"],"names":["define","createReactClass","ProductListItem","ProductList","render","props","products","previewHashes","status","onCreate","types","workspace","user","rest","loading","loaded","editable","privileges","includes","onLoadProducts","itemElements","map","product","id","content","i18n","length","_","sortBy","t","type","bind"],"mappings":"qaAAAA,OAAO,CACH,oBADG,CAEH,mBAFG,CAAP,CAGG,SAASC,gBAAT,CAA2BC,eAA3B,CAA4C,CAC3C,aAEA,GAAMC,aAAcF,iBAAiB,2BACjCG,MADiC,kBACxB,2BACkF,KAAKC,KADvF,CACGC,QADH,QACGA,QADH,CACaC,aADb,QACaA,aADb,CAC4BC,MAD5B,QAC4BA,MAD5B,CACoCC,QADpC,QACoCA,QADpC,CAC8CC,KAD9C,QAC8CA,KAD9C,CACqDC,SADrD,QACqDA,SADrD,CACgEC,IADhE,QACgEA,IADhE,CACyEC,IADzE,iHAEGC,QAFH,CAEuBN,MAFvB,CAEGM,OAFH,CAEYC,MAFZ,CAEuBP,MAFvB,CAEYO,MAFZ,CAGL,GAAI,CAACJ,SAAL,CAAgB,MAAO,KAAP,CAChB,GAAI,CAACC,IAAL,CAAW,MAAO,KAAP,CACX,GAAMI,UAAWL,UAAUK,QAAV,EAAsBJ,KAAKK,UAAL,CAAgBC,QAAhB,CAAyB,MAAzB,CAAvC,CAEA,GAAI,CAACH,MAAD,EAAW,CAACD,OAAhB,CAAyB,CACrB,KAAKT,KAAL,CAAWc,cAAX,GACA,MAAO,KAAP,CACH,CAED,GAAIC,cAAed,SAASe,GAAT,CAAa,wBACxB,qBAAC,eAAD,WACI,IAAKC,QAAQC,EADjB,CAEI,QAASD,OAFb,CAGI,YAAaf,cAAce,QAAQC,EAAtB,CAHjB,CAII,SAAUP,QAJd,EAKQH,IALR,EADwB,EAAb,CAAnB,CAQIW,QAAUV,QAAW,2BAAK,UAAU,SAAf,EAA0BW,KAAK,uBAAL,CAA1B,CAAX,CACNV,QAAUK,aAAaM,MAAvB,CAAgCN,YAAhC,CACAL,OAAU,2BAAK,UAAU,SAAf,EAA0BU,KAAK,uBAAL,CAA1B,CAAV,CACC,+BAXT,CAaA,MACI,4BAAK,UAAU,oBAAf,EACI,0BAAI,UAAU,4BAAd,EACI,0BAAI,UAAU,YAAd,EAA4BA,KAAK,qBAAL,CAA5B,CAAwD,4BAAM,UAAWX,QAAU,eAAV,CAA4B,OAA7C,EAAxD,CADJ,CAGKE,SAAY,0BAAI,UAAU,SAAd,EACT,2BAAK,UAAU,eAAf,EACI,yBAAG,UAAU,8BAAb,CAA4C,cAAY,UAAxD,EAAoES,KAAK,qBAAL,CAApE,CADJ,CAEI,0BAAI,UAAU,eAAd,EACCE,EAAEC,MAAF,CAASlB,KAAT,CAAgB,kBAAKe,MAAQI,CAAR,SAAL,EAAhB,EAAwCR,GAAxC,CAA4C,cAAQ,CACjD,MACI,2BAAI,IAAKS,IAAT,EAAe,yBAAG,QAASrB,SAASsB,IAAT,CAAc,KAAd,CAAoBD,IAApB,CAAZ,CAAuC,IAAKA,IAA5C,EAAmDL,KAAKK,KAAO,OAAZ,CAAnD,CAAf,CADJ,CAGH,CAJA,CADD,CAFJ,CADS,CAAZ,CAWQ,IAdb,CADJ,CAiBI,2BAAK,UAAU,qBAAf,EACKN,OADL,CAjBJ,CADJ,CAuBH,CAjDgC,CAAjB,CAApB,CAoDA,MAAOrB,YAAP,CACH,CA3DD","file":"ProductList.js","sourcesContent":["define([\n    'create-react-class',\n    './ProductListItem'\n], function(createReactClass, ProductListItem) {\n    'use strict';\n\n    const ProductList = createReactClass({\n        render() {\n            const { products, previewHashes, status, onCreate, types, workspace, user, ...rest } = this.props;\n            const { loading, loaded } = status;\n            if (!workspace) return null;\n            if (!user) return null;\n            const editable = workspace.editable && user.privileges.includes('EDIT')\n\n            if (!loaded && !loading) {\n                this.props.onLoadProducts();\n                return null;\n            }\n\n            var itemElements = products.map(product => (\n                    <ProductListItem\n                        key={product.id}\n                        product={product}\n                        previewHash={previewHashes[product.id]}\n                        editable={editable}\n                        {...rest} />\n                )),\n                content = loading ? (<div className=\"message\">{i18n('product.empty.message')}</div>) :\n                    loaded && itemElements.length ? itemElements :\n                    loaded ? (<div className=\"message\">{i18n('product.empty.message')}</div>) :\n                    (<div></div>);\n\n            return (\n                <div className=\"products-container\">\n                    <ul className=\"products-list nav nav-list\">\n                        <li className=\"nav-header\">{i18n('product.list.header')}<span className={loading ? 'loading badge' : 'badge'}></span></li>\n\n                        {editable ? (<li className=\"toolbar\">\n                            <div className=\"new btn-group\">\n                                <a className=\"btn dropdown-toggle btn-mini\" data-toggle=\"dropdown\">{i18n('product.list.create')}</a>\n                                <ul className=\"dropdown-menu\">\n                                {_.sortBy(types, t => i18n(`${t}.name`)).map(type => {\n                                    return (\n                                        <li key={type}><a onClick={onCreate.bind(this, type)} key={type}>{i18n(type + '.name')}</a></li>\n                                    )\n                                })}\n                                </ul>\n                            </div>\n                        </li>) : null}\n                    </ul>\n                    <div className=\"products-list-items\">\n                        {content}\n                    </div>\n                </div>\n            );\n        }\n    });\n\n    return ProductList;\n});\n"]}