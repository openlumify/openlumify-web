var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};define(['create-react-class','prop-types','classnames','components/Attacher'],function(createReactClass,PropTypes,classNames,Attacher){'use strict';var PADDING=10;var ProductToolbarItem=createReactClass({displayName:'ProductToolbarItem',propTypes:{item:PropTypes.shape({identifier:PropTypes.string.isRequired,itemComponentPath:PropTypes.string,icon:PropTypes.string,label:PropTypes.string,props:PropTypes.object}),active:PropTypes.bool,onClick:PropTypes.func,onItemMouseEnter:PropTypes.func,onItemMouseLeave:PropTypes.func,rightOffset:PropTypes.number},render:function render(){var _this=this;var _props=this.props,active=_props.active,item=_props.item,onItemMouseEnter=_props.onItemMouseEnter,onItemMouseLeave=_props.onItemMouseLeave;var itemProps=item.props,icon=item.icon,label=item.label,buttonClass=item.buttonClass,identifier=item.identifier,itemComponentPath=item.itemComponentPath,placementHint=item.placementHint;return React.createElement('li',{className:classNames('toolbar-item',{active:active}),onClick:this.onItemClick,ref:function ref(_ref){_this.item=_ref;},onMouseEnter:function onMouseEnter(event){onItemMouseEnter(identifier);},onMouseLeave:function onMouseLeave(event){onItemMouseLeave(identifier);}},itemComponentPath?placementHint&&placementHint==='popover'?this.renderPopoverItem():this.renderItem():this.renderButton());},renderButton:function renderButton(){var _props2=this.props,active=_props2.active,item=_props2.item;var itemProps=item.props,icon=item.icon,label=item.label,buttonClass=item.buttonClass,identifier=item.identifier,itemComponentPath=item.itemComponentPath;return React.createElement('div',{className:classNames('button',buttonClass)},icon?React.createElement('div',{className:'item-icon',style:{backgroundImage:'url('+icon+')'}}):null,React.createElement('span',null,label));},renderItem:function renderItem(){var _props$item=this.props.item,itemProps=_props$item.props,identifier=_props$item.identifier,itemComponentPath=_props$item.itemComponentPath;return React.createElement(Attacher,_extends({key:identifier,componentPath:itemComponentPath},itemProps));},renderPopoverItem:function renderPopoverItem(){var _this2=this;var _props3=this.props,active=_props3.active,item=_props3.item;var _item$props=item.props,itemProps=_item$props===undefined?{}:_item$props,icon=item.icon,label=item.label,buttonClass=item.buttonClass,identifier=item.identifier,itemComponentPath=item.itemComponentPath;return React.createElement('div',null,React.createElement('div',{className:classNames('button','has-popover',buttonClass)},icon?React.createElement('div',{className:'item-icon',style:{backgroundImage:'url('+icon+')'}}):null,React.createElement('span',null,label)),React.createElement('div',{style:{display:active?'block':'none'},className:'item-container',ref:function ref(_ref2){_this2.popover=_ref2;}},active?React.createElement(Attacher,_extends({key:identifier,componentPath:itemComponentPath,afterAttach:this.positionPopover},itemProps,{onResize:this.positionPopover})):null),React.createElement('div',{className:'arrow top'}));},onItemClick:function onItemClick(event){if(!$(event.target).closest('.item-container').length){var _props$item2=this.props.item,_props$item2$props=_props$item2.props,itemProps=_props$item2$props===undefined?{}:_props$item2$props,identifier=_props$item2.identifier;if(_.isFunction(itemProps.handler)){itemProps.handler();}else{this.props.onClick(identifier);}}},positionPopover:function positionPopover(){var rightOffset=this.props.rightOffset;var _item$getBoundingClie=this.item.getBoundingClientRect(),itemLeft=_item$getBoundingClie.left,itemWidth=_item$getBoundingClie.width,itemRight=_item$getBoundingClie.right;var _popover$getBoundingC=this.popover.getBoundingClientRect(),left=_popover$getBoundingC.left,right=_popover$getBoundingC.right,width=_popover$getBoundingC.width;var windowWidth=$(window).width();var maxLeft=windowWidth-width-PADDING-rightOffset;var currentOffset=$(this.popover).offset();var positionLeft=Math.min(itemLeft,maxLeft);$(this.arrow).offset({top:$(this.arrow).offset.top,left:itemLeft+itemWidth/2});$(this.popover).offset({top:currentOffset.top,left:Math.max(positionLeft,40)});}});return ProductToolbarItem;});
//# sourceMappingURL=ProductToolbarItem.js.map
