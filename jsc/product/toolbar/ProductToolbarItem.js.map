{"version":3,"sources":["../../../js/product/toolbar/ProductToolbarItem.jsx"],"names":["define","createReactClass","PropTypes","classNames","Attacher","PADDING","ProductToolbarItem","propTypes","item","shape","identifier","string","isRequired","itemComponentPath","icon","label","props","object","active","bool","onClick","func","onItemMouseEnter","onItemMouseLeave","rightOffset","number","render","itemProps","buttonClass","placementHint","onItemClick","ref","event","renderPopoverItem","renderItem","renderButton","backgroundImage","display","popover","positionPopover","$","target","closest","length","_","isFunction","handler","getBoundingClientRect","itemLeft","left","itemWidth","width","itemRight","right","windowWidth","window","maxLeft","currentOffset","offset","positionLeft","Math","min","arrow","top","max"],"mappings":"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","file":"ProductToolbarItem.js","sourcesContent":["define([\n    'create-react-class',\n    'prop-types',\n    'classnames',\n    'components/Attacher'\n], function(\n    createReactClass,\n    PropTypes,\n    classNames,\n    Attacher) {\n    'use strict';\n\n    const PADDING = 10;\n\n    const ProductToolbarItem = createReactClass({\n\n        propTypes: {\n            item: PropTypes.shape({\n                identifier: PropTypes.string.isRequired,\n                itemComponentPath: PropTypes.string,\n                icon: PropTypes.string,\n                label: PropTypes.string,\n                props: PropTypes.object\n            }),\n            active: PropTypes.bool,\n            onClick: PropTypes.func,\n            onItemMouseEnter: PropTypes.func,\n            onItemMouseLeave: PropTypes.func,\n            rightOffset: PropTypes.number\n        },\n\n        render() {\n            const { active, item, onItemMouseEnter, onItemMouseLeave } = this.props;\n            const { props: itemProps, icon, label, buttonClass, identifier, itemComponentPath, placementHint } = item;\n\n            return (\n                <li\n                    className={classNames('toolbar-item', { active })}\n                    onClick={this.onItemClick}\n                    ref={(ref) => { this.item = ref }}\n                    onMouseEnter={(event) => { onItemMouseEnter(identifier) }}\n                    onMouseLeave={(event) => { onItemMouseLeave(identifier) }}\n                >\n                  {itemComponentPath\n                      ? placementHint && placementHint === 'popover'\n                          ? this.renderPopoverItem()\n                          : this.renderItem()\n                      : this.renderButton()}\n                </li>\n            );\n        },\n\n        renderButton() {\n            const { active, item } = this.props;\n            const { props: itemProps, icon, label, buttonClass, identifier, itemComponentPath } = item;\n\n            return (\n                <div className={classNames('button', buttonClass)}>\n                    { icon ?\n                        <div className=\"item-icon\" style={{backgroundImage: `url(${icon})`}}></div>\n                    : null}\n                    <span>{label}</span>\n                </div>\n            )\n        },\n\n        renderItem() {\n            const { props: itemProps, identifier, itemComponentPath } = this.props.item;\n\n            return (\n                <Attacher\n                    key={identifier}\n                    componentPath={itemComponentPath}\n                    {...itemProps}\n                />\n            )\n        },\n\n        renderPopoverItem() {\n            const { active, item } = this.props;\n            const { props: itemProps = {}, icon, label, buttonClass, identifier, itemComponentPath } = item;\n\n\n            return (\n                <div>\n                    <div className={classNames('button', 'has-popover', buttonClass)}>\n                        { icon ?\n                            <div className=\"item-icon\" style={{backgroundImage: `url(${icon})`}}></div>\n                        : null}\n                        <span>{label}</span>\n                    </div>\n                    <div\n                        style={{display: (active ? 'block' : 'none')}}\n                        className=\"item-container\"\n                        ref={(ref) => { this.popover = ref }}\n                    >\n                       {active ? <Attacher\n                            key={identifier}\n                            componentPath={itemComponentPath}\n                            afterAttach={this.positionPopover}\n                            {...itemProps}\n                            onResize={this.positionPopover}\n                       /> : null}\n                    </div>\n                    <div className=\"arrow top\"></div>\n                </div>\n            )\n        },\n\n        onItemClick(event) {\n            if (!$(event.target).closest('.item-container').length) {\n                const { props: itemProps = {}, identifier } = this.props.item;\n                if (_.isFunction(itemProps.handler)) {\n                    itemProps.handler();\n                } else {\n                    this.props.onClick(identifier);\n                }\n            }\n        },\n\n        /**\n         * Call `props.onResize` after your component with placementHint `popover` changes size to update the popover's position\n         * @callback org.openlumify.product.toolbar.item~onResize\n         */\n        positionPopover() {\n            const rightOffset = this.props.rightOffset;\n            const { left: itemLeft, width: itemWidth, right: itemRight } = this.item.getBoundingClientRect();\n            const { left, right, width } = this.popover.getBoundingClientRect();\n            const windowWidth = $(window).width();\n            const maxLeft = windowWidth - width - PADDING - rightOffset;\n            const currentOffset = $(this.popover).offset();\n            const positionLeft = Math.min(itemLeft, maxLeft);\n\n            $(this.arrow).offset({ top: $(this.arrow).offset.top, left: (itemLeft + (itemWidth / 2))});\n            $(this.popover).offset({ top: currentOffset.top, left: Math.max(positionLeft, 40) }); //menubar width\n        }\n    });\n\n    return ProductToolbarItem;\n});\n"]}