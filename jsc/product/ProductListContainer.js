var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}define(['create-react-class','prop-types','react-redux','./ProductList','data/web-worker/store/product/actions','data/web-worker/store/product/selectors','configuration/plugins/registry'],function(createReactClass,PropTypes,redux,ProductList,productActions,productSelectors,registry){'use strict';registry.markUndocumentedExtensionPoint('org.openlumify.workproduct');var initial;$(document).on('menubarToggleDisplay',function handler(event,data){var name=data.name,options=data.options;if(name==='products'&&!_.isEmpty(options)){if('id'in options){var productId=options.id,rest=_objectWithoutProperties(options,['id']);initial=_extends({productId:productId},rest);$(document).off('menubarToggleDisplay',handler);}else console.warn('Specify id=[product id] in url to open product. #tools=products&id=...');}}).on('productsPaneVisible',function handler(event,data){$(document).off('productsPaneVisible',handler);if(initial)return;openlumifyData.storePromise.then(function(store){var state=store.getState();var selected=productSelectors.getSelectedId(state);if(!selected){var products=productSelectors.getProducts(state);if(products.length){store.dispatch(productActions.select(products[0].id));}}});});return redux.connect(function(state,props){return{status:productSelectors.getStatus(state),types:productSelectors.getProductTypes(state),selected:productSelectors.getSelectedId(state),products:productSelectors.getProducts(state),previewHashes:productSelectors.getPreviewHashesById(state),user:state.user.current,workspace:state.workspace.currentId?state.workspace.byId[state.workspace.currentId]:null};},function(dispatch,props){return{onLoadProducts:function onLoadProducts(){dispatch(productActions.list(initial));initial=undefined;},onCreate:function onCreate(type){dispatch(productActions.create('Untitled',type));},onDeleteProduct:function onDeleteProduct(productId){dispatch(productActions.delete(productId));},onUpdateTitle:function onUpdateTitle(productId,title){dispatch(productActions.updateTitle(productId,title));},onSelectProduct:function onSelectProduct(productId){dispatch(productActions.select(productId));},onDropElements:function onDropElements(product,elements){var extension=_.findWhere(registry.extensionsForPoint('org.openlumify.workproduct'),{identifier:product.kind});if(extension.storeActions&&_.isFunction(extension.storeActions.dropElements)){dispatch(extension.storeActions.dropElements(product.id,elements,{undoable:true}));}}};})(ProductList);});
//# sourceMappingURL=ProductListContainer.js.map
