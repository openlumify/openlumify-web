{"version":3,"sources":["../../js/product/ProductDetail.jsx"],"names":["define","createReactClass","PropTypes","ProductDetailEmpty","ErrorBoundary","ProductDetail","propTypes","product","shape","id","string","isRequired","extension","componentPath","workspace","object","getInitialState","Component","componentDidMount","requestComponent","props","extendedData","componentWillReceiveProps","nextProps","render","state","editable","hasPreview","title","i18n","identifier","padding","requestProduct","onGetProduct","setState","Promise","require","then","C"],"mappings":"AAAAA,OAAO,CACH,oBADG,CAEH,YAFG,CAGH,wBAHG,CAIH,0BAJG,CAAP,CAKG,SAASC,gBAAT,CAA2BC,SAA3B,CAAsCC,kBAAtC,CAA0DC,aAA1D,CAAyE,CACxE,aAEA,GAAMC,eAAgBJ,iBAAiB,6BACnCK,UAAW,CACPC,QAASL,UAAUM,KAAV,CAAgB,CACrBC,GAAIP,UAAUQ,MAAV,CAAiBC,UADA,CAAhB,EAENA,UAHI,CAIPC,UAAWV,UAAUM,KAAV,CAAgB,CACvBK,cAAeX,UAAUQ,MAAV,CAAiBC,UADT,CAAhB,EAERA,UANI,CAOPG,UAAWZ,UAAUa,MAPd,CADwB,CAWnCC,gBAAiB,iCAAO,CAAEC,UAAW,IAAb,CAAP,EAXkB,CAanCC,iBAbmC,6BAaf,CAChB,KAAKC,gBAAL,CAAsB,KAAKC,KAA3B,CAAkC,CAAC,KAAKA,KAAL,CAAWb,OAAX,CAAmBc,YAAtD,EACH,CAfkC,CAiBnCC,yBAjBmC,oCAiBTC,SAjBS,CAiBE,CACjC,KAAKJ,gBAAL,CAAsBI,SAAtB,CAAiCA,UAAUhB,OAAV,GAAsB,KAAKa,KAAL,CAAWb,OAAlE,EACH,CAnBkC,CAqBnCiB,MArBmC,kBAqB1B,IACGP,UADH,CACiB,KAAKQ,KADtB,CACGR,SADH,YAEgD,KAAKG,KAFrD,CAEGb,OAFH,QAEGA,OAFH,CAEYmB,QAFZ,QAEYA,QAFZ,CAEsBC,UAFtB,QAEsBA,UAFtB,CAEkCb,SAFlC,QAEkCA,SAFlC,IAGGO,aAHH,CAG2Bd,OAH3B,CAGGc,YAHH,CAGiBO,KAHjB,CAG2BrB,OAH3B,CAGiBqB,KAHjB,CAKL,MACIX,YAAaI,YAAb,EAA6BP,SAA7B,CACI,oBAAC,aAAD,MACI,oBAAC,SAAD,EAAW,QAAS,KAAKM,KAAL,CAAWb,OAA/B,CAAwC,WAAYoB,UAApD,EADJ,CADJ,CAKI,oBAAC,kBAAD,EACI,SAAUD,QADd,CAEI,KAAMG,KAAK,KAAKT,KAAL,CAAWR,SAAX,CAAqBkB,UAArB,CAAkC,OAAvC,CAFV,CAGI,MAAOF,KAHX,CAII,QAAS,KAAKR,KAAL,CAAWW,OAJxB,EANR,CAcH,CAxCkC,CA0CnCZ,gBA1CmC,2BA0ClBC,KA1CkB,CA0CXY,cA1CW,CA0CK,gBACpC,GAAIA,cAAJ,CAAoB,CAChBZ,MAAMa,YAAN,CAAmBb,MAAMb,OAAN,CAAcE,EAAjC,EACH,CAED,GAAIW,MAAMR,SAAN,CAAgBC,aAAhB,GAAkC,KAAKO,KAAL,CAAWR,SAAX,CAAqBC,aAAvD,EAAwE,CAAC,KAAKY,KAAL,CAAWR,SAAxF,CAAmG,CAC/F,KAAKiB,QAAL,CAAc,CAAEjB,UAAW,IAAb,CAAd,EACAkB,QAAQC,OAAR,CAAgBhB,MAAMR,SAAN,CAAgBC,aAAhC,EAA+CwB,IAA/C,CAAoD,SAACC,CAAD,QAAO,OAAKJ,QAAL,CAAc,CAAEjB,UAAWqB,CAAb,CAAd,CAAP,EAApD,EACH,CACJ,CAnDkC,CAAjB,CAAtB,CAsDA,MAAOjC,cAAP,CACH,CA/DD","file":"ProductDetail.js","sourcesContent":["define([\n    'create-react-class',\n    'prop-types',\n    './ProductDetailLoading',\n    'components/ErrorBoundary'\n], function(createReactClass, PropTypes, ProductDetailEmpty, ErrorBoundary) {\n    'use strict';\n\n    const ProductDetail = createReactClass({\n        propTypes: {\n            product: PropTypes.shape({\n                id: PropTypes.string.isRequired\n            }).isRequired,\n            extension: PropTypes.shape({\n                componentPath: PropTypes.string.isRequired\n            }).isRequired,\n            workspace: PropTypes.object\n        },\n\n        getInitialState: () => ({ Component: null }),\n\n        componentDidMount() {\n            this.requestComponent(this.props, !this.props.product.extendedData);\n        },\n\n        componentWillReceiveProps(nextProps) {\n            this.requestComponent(nextProps, nextProps.product !== this.props.product);\n        },\n\n        render() {\n            const { Component } = this.state;\n            const { product, editable, hasPreview, workspace } = this.props;\n            const { extendedData, title } = product;\n\n            return (\n                Component && extendedData && workspace ? (\n                    <ErrorBoundary>\n                        <Component product={this.props.product} hasPreview={hasPreview}></Component>\n                    </ErrorBoundary>\n                ) : (\n                    <ProductDetailEmpty\n                        editable={editable}\n                        type={i18n(this.props.extension.identifier + '.name')}\n                        title={title}\n                        padding={this.props.padding}\n                    />\n                )\n            )\n        },\n\n        requestComponent(props, requestProduct) {\n            if (requestProduct) {\n                props.onGetProduct(props.product.id);\n            }\n\n            if (props.extension.componentPath !== this.props.extension.componentPath || !this.state.Component) {\n                this.setState({ Component: null })\n                Promise.require(props.extension.componentPath).then((C) => this.setState({ Component: C }))\n            }\n        }\n    });\n\n    return ProductDetail;\n});\n"]}