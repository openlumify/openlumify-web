{"version":3,"sources":["../../js/fields/double.js"],"names":["define","defineComponent","template","P","F","withPropertyField","withHistogram","DoubleField","makeNumber","v","number","parseFloat","after","$node","html","attr","setValue","value","select","val","getValue","trim","getMetadata","currentVal","isNaN","inputPrecision","decimalPart","match","length","isValid","name","property","title","_","isNumber","vertex","singlePropValid"],"mappings":"AACAA,OAAO,CACH,sBADG,CAEH,iBAFG,CAGH,cAHG,CAIH,wBAJG,CAKH,qBALG,CAMH,iBANG,CAAP,CAOG,SAASC,eAAT,CAA0BC,QAA1B,CAAoCC,CAApC,CAAuCC,CAAvC,CAA0CC,iBAA1C,CAA6DC,aAA7D,CAA4E,CAC3E,aAEA,MAAOL,iBAAgBM,WAAhB,CAA6BF,iBAA7B,CAAgDC,aAAhD,CAAP,CAEA,QAASE,WAAT,CAAoBC,CAApB,CAAuB,CACnB,MAAON,GAAEO,MAAF,CAASC,UAAT,CAAoBF,CAApB,CAAP,CACH,CAED,QAASF,YAAT,EAAuB,CAEnB,KAAKK,KAAL,CAAW,YAAX,CAAyB,UAAW,CAChC,KAAKC,KAAL,CAAWC,IAAX,CAAgBZ,SAAS,KAAKa,IAAd,CAAhB,EACH,CAFD,EAIA,KAAKC,QAAL,CAAgB,SAASC,KAAT,CAAgB,CAC5B,KAAKC,MAAL,CAAY,eAAZ,EAA6BC,GAA7B,CAAiCF,KAAjC,EACH,CAFD,CAIA,KAAKG,QAAL,CAAgB,UAAW,CACvB,MAAOZ,YAAW,KAAKU,MAAL,CAAY,eAAZ,EAA6BC,GAA7B,GAAmCE,IAAnC,EAAX,CAAP,CACH,CAFD,CAIA,KAAKC,WAAL,CAAmB,UAAW,CAC1B,GAAIC,YAAa,KAAKL,MAAL,CAAY,eAAZ,EAA6BC,GAA7B,GAAmCE,IAAnC,EAAjB,CACA,GAAIE,YAAc,CAACC,MAAMhB,WAAWe,UAAX,CAAN,CAAnB,CAAkD,CAC9C,GAAIE,gBAAiB,CAArB,CACIC,YAAcH,WAAWI,KAAX,CAAiB,SAAjB,CADlB,CAEA,GAAID,WAAJ,CAAiB,CACbD,eAAiBC,YAAY,CAAZ,EAAeE,MAAhC,CACH,CACD,MAAO,CAAE,uCAAwCH,cAA1C,CAAP,CACH,CACD,MAAO,KAAP,CACH,CAXD,CAaA,KAAKI,OAAL,CAAe,SAASZ,KAAT,CAAgB,CAC3B,GAAIa,MAAO,KAAKf,IAAL,CAAUgB,QAAV,CAAmBC,KAA9B,CACA,MAAOC,GAAEC,QAAF,CAAWjB,KAAX,GAAqB,CAACO,MAAMP,KAAN,CAAtB,EAAsCb,EAAE+B,MAAF,CAASC,eAAT,CAAyBnB,KAAzB,CAAgCa,IAAhC,CAA7C,CACH,CAHD,CAIH,CACJ,CAhDD","file":"double.js","sourcesContent":["\ndefine([\n    'flight/lib/component',\n    './doubleTpl.hbs',\n    'util/parsers',\n    'util/vertex/formatters',\n    './withPropertyField',\n    './withHistogram'\n], function(defineComponent, template, P, F, withPropertyField, withHistogram) {\n    'use strict';\n\n    return defineComponent(DoubleField, withPropertyField, withHistogram);\n\n    function makeNumber(v) {\n        return P.number.parseFloat(v);\n    }\n\n    function DoubleField() {\n\n        this.after('initialize', function() {\n            this.$node.html(template(this.attr));\n        });\n\n        this.setValue = function(value) {\n            this.select('inputSelector').val(value);\n        };\n\n        this.getValue = function() {\n            return makeNumber(this.select('inputSelector').val().trim());\n        };\n\n        this.getMetadata = function() {\n            var currentVal = this.select('inputSelector').val().trim();\n            if (currentVal && !isNaN(makeNumber(currentVal))) {\n                var inputPrecision = 0,\n                    decimalPart = currentVal.match(/\\.(\\d+)/);\n                if (decimalPart) {\n                    inputPrecision = decimalPart[1].length;\n                }\n                return { 'http://openlumify.org#inputPrecision': inputPrecision };\n            }\n            return null;\n        };\n\n        this.isValid = function(value) {\n            var name = this.attr.property.title;\n            return _.isNumber(value) && !isNaN(value) && F.vertex.singlePropValid(value, name);\n        };\n    }\n});\n"]}